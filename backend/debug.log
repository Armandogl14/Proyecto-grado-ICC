INFO 2025-07-05 22:42:05,701 autoreload 9316 19868 Watching for file changes with StatReloader
INFO 2025-07-05 22:43:09,199 autoreload 22588 8672 Watching for file changes with StatReloader
INFO 2025-07-05 22:48:15,046 basehttp 22588 11056 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-05 22:48:15,101 basehttp 22588 7300 "GET /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 14410
INFO 2025-07-06 02:15:37,004 autoreload 22588 8672 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-06 02:15:38,777 autoreload 6152 9500 Watching for file changes with StatReloader
INFO 2025-07-06 02:17:14,066 autoreload 7704 29968 Watching for file changes with StatReloader
INFO 2025-07-06 02:17:22,800 basehttp 7704 30340 "OPTIONS /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 0
INFO 2025-07-06 02:17:22,803 basehttp 7704 17568 "OPTIONS /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 0
INFO 2025-07-06 02:17:23,894 basehttp 7704 3604 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-06 02:17:23,913 basehttp 7704 29552 "GET /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 14410
INFO 2025-07-06 02:17:26,298 basehttp 7704 17568 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-06 02:17:26,298 basehttp 7704 30340 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-06 02:17:26,955 basehttp 7704 29552 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1948
INFO 2025-07-06 02:17:26,994 basehttp 7704 3604 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5129
INFO 2025-07-06 02:17:35,617 basehttp 7704 30340 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-06 02:17:36,301 basehttp 7704 3604 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-06 02:17:41,189 basehttp 7704 17568 "OPTIONS /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 0
INFO 2025-07-06 02:17:41,189 basehttp 7704 30340 "OPTIONS /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 0
INFO 2025-07-06 02:17:42,076 basehttp 7704 29552 "GET /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 7205
INFO 2025-07-06 02:17:42,085 basehttp 7704 3604 "GET /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 14410
INFO 2025-07-06 02:17:48,959 basehttp 7704 3604 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1948
INFO 2025-07-06 02:17:57,461 basehttp 7704 3604 "GET /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 14410
INFO 2025-07-06 17:59:39,497 basehttp 7704 25328 "OPTIONS /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 0
INFO 2025-07-06 17:59:39,609 basehttp 7704 17436 "OPTIONS /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 0
INFO 2025-07-06 20:34:44,458 autoreload 17040 13300 Watching for file changes with StatReloader
INFO 2025-07-06 20:44:32,221 basehttp 17040 25588 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-06 20:44:32,225 basehttp 17040 13004 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-06 20:44:33,444 basehttp 17040 7660 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1948
INFO 2025-07-06 20:44:33,456 basehttp 17040 17196 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5129
INFO 2025-07-06 20:49:42,964 basehttp 17040 24476 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-06 20:49:43,854 basehttp 17040 21976 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-06 20:49:51,556 basehttp 17040 24476 "OPTIONS /api/contracts/ HTTP/1.1" 200 0
INFO 2025-07-06 20:49:52,321 basehttp 17040 21976 "POST /api/contracts/ HTTP/1.1" 201 3559
INFO 2025-07-06 20:49:52,407 basehttp 17040 24476 "OPTIONS /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 0
INFO 2025-07-06 20:49:52,407 basehttp 17040 20468 "OPTIONS /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 0
INFO 2025-07-06 20:49:53,291 basehttp 17040 21976 "GET /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 3983
INFO 2025-07-06 20:49:53,300 basehttp 17040 8568 "GET /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 14410
INFO 2025-07-06 20:53:50,214 basehttp 17040 8568 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 20:53:50,223 basehttp 17040 21976 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5482
INFO 2025-07-06 20:53:53,711 basehttp 17040 8568 "GET /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 14410
INFO 2025-07-06 20:53:53,748 basehttp 17040 21976 "GET /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 3983
INFO 2025-07-06 20:54:45,924 basehttp 17040 21976 "GET /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 3983
INFO 2025-07-06 20:54:45,950 basehttp 17040 8568 "GET /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 14410
INFO 2025-07-06 20:56:51,478 autoreload 17040 13300 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-06 20:56:53,477 autoreload 3572 28876 Watching for file changes with StatReloader
INFO 2025-07-06 20:57:18,979 autoreload 3572 28876 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-06 20:57:20,605 autoreload 12200 28428 Watching for file changes with StatReloader
INFO 2025-07-06 21:01:08,163 ml_service 9776 21296 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:01:08,164 ml_service 9776 21296 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:01:11,729 ml_service 9776 21296 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece claramente los términos del contrato de alquiler de un local comercial entre la Propietaria y el Inquilino. No se observa ninguna característica abusiva en la cláusula, ya que simplemente establece el uso del local y la posibilidad de la Propietaria de cambiar su uso sin previo aviso, lo cual es una prerrogativa razonable en un contrato de arrendamiento.', 'suggested_fix': ''}
INFO 2025-07-06 21:01:11,768 ml_service 9776 21296 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:01:11,769 ml_service 9776 21296 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:01:16,578 ml_service 9776 21296 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida, ya que establece una obligación clara para el Inquilino. Sin embargo, se considera abusiva porque impone al Inquilino la responsabilidad de multas impuestas por incumplimientos ajenos a su operación, lo que crea un desequilibrio significativo entre las partes al cargar al Inquilino con responsabilidades que no le corresponden directamente.', 'suggested_fix': "Para hacer esta cláusula no abusiva, se podría reescribir de la siguiente manera: 'El Inquilino acepta hacerse responsable de cualquier multa impuesta por el incumplimiento de regulaciones que sean consecuencia directa de su operación en el local arrendado.' De esta forma, se limita la responsabilidad del Inquilino a situaciones directamente relacionadas con su operación."}
INFO 2025-07-06 21:01:16,599 ml_service 9776 21296 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:01:16,599 ml_service 9776 21296 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:01:18,926 ml_service 9776 21296 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que establece una condición clara y específica sobre la prórroga automática del contrato con un aumento del 25% en el alquiler. Sin embargo, es considerada abusiva según la legislación dominicana por crear un desequilibrio significativo entre las partes al imponer un aumento anual sin opción de renegociación, lo cual limita los derechos del inquilino y viola principios de equidad.', 'suggested_fix': 'Para hacer esta cláusula no abusiva, se podría añadir una disposición que permita la renegociación del aumento del alquiler o establecer un mecanismo de revisión periódica de las condiciones del contrato para garantizar un equilibrio entre las partes.'}
INFO 2025-07-06 21:01:18,966 ml_service 9776 21296 Iniciando análisis OpenAI para 3 cláusulas
DEBUG 2025-07-06 21:01:18,966 ml_service 9776 21296 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-06 21:01:21,408 ml_service 9776 21296 Análisis recibido: {'resumen': 'Las cláusulas abusivas en el contrato de alquiler del local comercial permiten a la propietaria cambiar el uso del local sin aviso, imponer multas por regulaciones ajenas y aumentar el alquiler automáticamente sin posibilidad de renegociación, lo que limita los derechos y flexibilidad del inquilino.', 'recomendaciones': ['Solicitar la eliminación de la cláusula que permite a la propietaria cambiar el uso del local sin previo aviso, para garantizar la estabilidad del negocio del inquilino.', 'Negociar la eliminación de la cláusula que responsabiliza al inquilino por multas ajenas a su operación, ya que puede resultar en costos injustos e imprevistos.', 'Buscar modificar la cláusula de prorroga automática con aumento de alquiler, para incluir la posibilidad de renegociación o término del contrato en caso de desacuerdo con el aumento propuesto.']}
INFO 2025-07-06 21:03:38,769 autoreload 8160 2920 Watching for file changes with StatReloader
INFO 2025-07-06 21:03:51,271 basehttp 8160 24968 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:03:51,311 basehttp 8160 18352 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5482
INFO 2025-07-06 21:03:54,195 basehttp 8160 24968 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5482
INFO 2025-07-06 21:03:54,196 basehttp 8160 18352 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:15:18,030 basehttp 8160 28996 "GET /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 3983
INFO 2025-07-06 21:15:18,045 basehttp 8160 24664 "GET /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 14410
INFO 2025-07-06 21:15:22,311 basehttp 8160 28996 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5482
INFO 2025-07-06 21:15:22,316 basehttp 8160 24664 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:15:23,859 basehttp 8160 18292 "OPTIONS /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 0
INFO 2025-07-06 21:15:23,860 basehttp 8160 12648 "OPTIONS /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 0
INFO 2025-07-06 21:15:24,764 basehttp 8160 24664 "GET /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 7205
INFO 2025-07-06 21:15:24,807 basehttp 8160 28996 "GET /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 14410
INFO 2025-07-06 21:15:34,438 basehttp 8160 28996 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:15:36,287 basehttp 8160 12648 "OPTIONS /api/contracts/babf6e44-8ffd-4e9a-a042-04a5b971e2d0/ HTTP/1.1" 200 0
INFO 2025-07-06 21:15:36,288 basehttp 8160 18292 "OPTIONS /api/clauses/?contract=babf6e44-8ffd-4e9a-a042-04a5b971e2d0 HTTP/1.1" 200 0
INFO 2025-07-06 21:15:37,210 basehttp 8160 24664 "GET /api/clauses/?contract=babf6e44-8ffd-4e9a-a042-04a5b971e2d0 HTTP/1.1" 200 14410
INFO 2025-07-06 21:15:37,231 basehttp 8160 28996 "GET /api/contracts/babf6e44-8ffd-4e9a-a042-04a5b971e2d0/ HTTP/1.1" 200 8538
INFO 2025-07-06 21:15:37,960 basehttp 8160 28996 "GET /api/clauses/?contract=babf6e44-8ffd-4e9a-a042-04a5b971e2d0 HTTP/1.1" 200 14410
INFO 2025-07-06 21:15:40,184 basehttp 8160 28996 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:18:54,416 autoreload 8160 2920 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-06 21:18:56,245 autoreload 25408 16664 Watching for file changes with StatReloader
INFO 2025-07-06 21:20:58,839 basehttp 25408 8056 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1941
INFO 2025-07-06 21:20:58,925 basehttp 25408 7724 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5482
INFO 2025-07-06 21:21:12,535 basehttp 25408 7724 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-06 21:21:27,216 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:27,217 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:29,101 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto proporciona información clara y específica sobre el objeto del contrato (alquiler de un apartamento) y las obligaciones de las partes involucradas. No se observa ninguna condición abusiva que cree un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas o viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:29,127 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:29,127 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:31,308 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida, ya que establece las consecuencias en caso de rescisión anticipada del contrato por parte del inquilino, especificando el pago de alquileres vencidos y una penalidad de tres meses de renta. Esta cláusula es común en contratos de arrendamiento y no presenta ninguna irregularidad que la invalide. No se considera abusiva, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:31,334 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:31,335 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:33,801 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto analizado es una cláusula contractual válida, ya que establece el derecho de la PROPIETARIA a ingresar a la propiedad para inspeccionar el estado del inmueble, lo cual es una práctica común en contratos de arrendamiento. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas o viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:33,817 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:33,817 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:35,330 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto proporcionado es una cláusula contractual válida, ya que establece la posibilidad de modificación de las condiciones del contrato por parte de LA PROPIETARIA. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas o viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:35,354 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:35,355 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:38,656 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una obligación clara y específica para el inquilino en relación al pago de daños estructurales o de mantenimiento del inmueble, lo cual es común en contratos de arrendamiento. No crea un desequilibrio significativo entre las partes ni limita derechos fundamentales, simplemente establece una responsabilidad del inquilino en caso de daños. No se considera abusiva según la legislación dominicana.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:38,671 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:38,671 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:41,606 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida ya que establece la renuncia expresa del inquilino a cualquier reclamación legal o disputa relacionada con el contrato. Sin embargo, es considerada abusiva según la legislación dominicana porque limita los derechos fundamentales del inquilino al renunciar a cualquier reclamación legal o disputa, creando un desequilibrio significativo entre las partes y violando el principio de equidad.', 'suggested_fix': 'Para reescribir de forma no abusiva, se podría modificar la cláusula para permitir que el inquilino renuncie a reclamaciones específicas y no de forma general, respetando así sus derechos fundamentales y evitando un desequilibrio injusto en la relación contractual.'}
INFO 2025-07-06 21:21:41,628 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:41,628 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:42,911 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una restricción razonable en cuanto a las visitas del inquilino después de cierta hora, lo cual es común en contratos de arrendamiento. No crea un desequilibrio significativo entre las partes ni limita derechos fundamentales de manera desproporcionada. Además, al requerir autorización de la propietaria, se respeta el principio de buena fe y equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:42,941 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:42,943 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:44,610 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida porque establece claramente una obligación de pago por parte del inquilino y una consecuencia por retraso en el pago. Sin embargo, es considerada abusiva según la legislación dominicana porque otorga a la propietaria el derecho a cambiar las cerraduras sin previo aviso, lo cual crea un desequilibrio significativo entre las partes al limitar la seguridad y acceso a la vivienda del inquilino sin un procedimiento adecuado.', 'suggested_fix': 'Para reescribir de forma no abusiva, se podría modificar la cláusula para establecer un procedimiento claro y equitativo en caso de retraso en el pago, respetando los derechos fundamentales del inquilino y evitando medidas extremas como el cambio de cerraduras sin previo aviso.'}
INFO 2025-07-06 21:21:44,629 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:44,629 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:46,616 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece la duración del contrato y la posibilidad de cancelación unilateral por parte de LA PROPIETARIA. Sin embargo, no se considera abusiva según la legislación dominicana, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:21:46,636 ml_service 25408 7724 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:21:46,649 ml_service 25408 7724 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:21:49,471 ml_service 25408 7724 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida, ya que establece una condición específica en caso de renovación del contrato de alquiler. Sin embargo, es considerada abusiva según la legislación dominicana, ya que impone un aumento automático del 30% en el alquiler sin previo aviso, lo cual crea un desequilibrio significativo entre las partes al imponer una condición desproporcionada sin posibilidad de negociación.', 'suggested_fix': 'Para que la cláusula sea considerada no abusiva, se podría reescribir de forma que el aumento en el alquiler sea negociado y acordado por ambas partes de manera transparente y equitativa, evitando imposiciones unilaterales.'}
INFO 2025-07-06 21:21:49,607 ml_service 25408 7724 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-06 21:21:49,608 ml_service 25408 7724 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-06 21:21:51,352 ml_service 25408 7724 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato pueden dar lugar a una situación desfavorable para el inquilino, limitando sus derechos y exponiéndolo a posibles abusos por parte de la propietaria.', 'recomendaciones': ['Negociar la eliminación o modificación de las cláusulas abusivas para equilibrar los derechos y obligaciones de ambas partes.', 'Consultar con un abogado especializado en arrendamientos para revisar el contrato y recibir asesoramiento legal sobre cómo proteger los intereses del inquilino.', 'Buscar alternativas de vivienda que ofrezcan condiciones más equitativas y respetuosas de los derechos del inquilino.']}
INFO 2025-07-06 21:21:51,496 basehttp 25408 7724 "POST /api/contracts/ HTTP/1.1" 201 3559
INFO 2025-07-06 21:21:54,985 basehttp 25408 9288 "OPTIONS /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 0
INFO 2025-07-06 21:21:54,988 basehttp 25408 15656 "OPTIONS /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 0
INFO 2025-07-06 21:21:55,656 basehttp 25408 8056 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 14620
INFO 2025-07-06 21:21:55,668 basehttp 25408 7724 "GET /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 8512
INFO 2025-07-06 21:21:56,390 basehttp 25408 7724 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 14620
INFO 2025-07-06 21:24:03,951 basehttp 25408 7724 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1967
INFO 2025-07-06 21:24:03,981 basehttp 25408 8056 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5857
INFO 2025-07-06 21:24:14,330 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:14,331 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:15,822 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece claramente los términos del contrato de alquiler, especificando la ubicación y características del apartamento, así como la prohibición de ceder o subarrendar sin consentimiento. No presenta desequilibrio significativo entre las partes ni limita derechos fundamentales. No se considera abusiva según la legislación dominicana.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:15,878 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:15,884 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:18,070 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece las consecuencias de rescindir el contrato antes de su vencimiento, especificando el pago de alquileres vencidos y una penalidad de un mes de renta. Esta cláusula es común en contratos de arrendamiento y establece las obligaciones del inquilino en caso de incumplimiento. No se observa un desequilibrio significativo entre las partes ni una imposición desproporcionada, ya que el pago de alquileres vencidos y una penalidad es una consecuencia razonable del incumplimiento contractual.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:18,090 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:18,090 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:20,408 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida ya que establece un compromiso claro entre la propietaria y el inquilino respecto al uso y disfrute del inmueble arrendado durante la duración del contrato. No se observa ninguna característica abusiva en esta cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y respeta los principios de buena fe y equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:20,439 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:20,451 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:21,971 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto proporcionado es una cláusula contractual válida, ya que establece que todas las condiciones del contrato son esenciales y su incumplimiento puede llevar a la resolución inmediata del mismo. Esta cláusula es común en contratos para resaltar la importancia de cumplir con todas las condiciones acordadas. No se considera abusiva, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:21,975 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:21,975 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:23,152 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida ya que establece las obligaciones del inquilino en relación al mantenimiento del inmueble y la entrega en buen estado al final del contrato, así como su responsabilidad por daños y reparaciones. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas o viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:23,175 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:23,175 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:24,683 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida, ya que establece la jurisdicción de los tribunales de Santo Domingo para la resolución de disputas, lo cual es una práctica común en contratos. No se observa ninguna característica abusiva en la cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:24,705 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:24,705 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:26,408 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una obligación clara y específica para el inquilino, que es obtener autorización previa por escrito de la propietaria antes de hacer modificaciones en el inmueble. Esta cláusula busca proteger los intereses de la propietaria y mantener la integridad del inmueble. No crea un desequilibrio significativo entre las partes ni limita derechos fundamentales, sino que establece una condición razonable para el uso del inmueble.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:26,421 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:26,422 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:28,843 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida ya que establece claramente las obligaciones del inquilino en cuanto al pago del alquiler mensual y los recargos por mora. No se observa ninguna característica abusiva en la cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:28,896 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:28,897 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:31,063 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece claramente la duración del contrato, la posibilidad de renovación o rescisión y el plazo de aviso requerido. No se observa ninguna característica abusiva en la cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:31,080 ml_service 25408 8056 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:24:31,080 ml_service 25408 8056 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:24:33,384 ml_service 25408 8056 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de manera clara y precisa las condiciones de aumento del alquiler en caso de renovación, basándose en criterios objetivos como la tasa de inflación oficial del Banco Central de la República Dominicana o un aumento del 10%. No crea un desequilibrio significativo entre las partes ni limita derechos fundamentales. Además, al basarse en criterios objetivos, no impone condiciones desproporcionadas ni viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:24:33,552 ml_service 25408 8056 Iniciando análisis OpenAI para 7 cláusulas
DEBUG 2025-07-06 21:24:33,552 ml_service 25408 8056 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-06 21:24:34,748 ml_service 25408 8056 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato presentan riesgos para el inquilino, como penalidades por rescisión anticipada y obligaciones de mantenimiento y pago.', 'recomendaciones': ['Solicitar una revisión legal para negociar cláusulas más equitativas y claras.', 'Buscar asesoramiento sobre la legalidad de las penalidades por rescisión anticipada.', 'Asegurarse de entender las obligaciones de mantenimiento y reparación antes de firmar el contrato.']}
INFO 2025-07-06 21:24:34,886 basehttp 25408 8056 "POST /api/contracts/ HTTP/1.1" 201 3956
INFO 2025-07-06 21:24:34,995 basehttp 25408 9288 "OPTIONS /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 0
INFO 2025-07-06 21:24:34,996 basehttp 25408 15656 "OPTIONS /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 0
INFO 2025-07-06 21:24:35,715 basehttp 25408 8056 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 9479
INFO 2025-07-06 21:24:35,718 basehttp 25408 7724 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 9234
INFO 2025-07-06 21:24:36,373 basehttp 25408 7724 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 9479
INFO 2025-07-06 21:24:44,843 basehttp 25408 7724 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:24:44,895 basehttp 25408 8056 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6241
INFO 2025-07-06 21:24:48,436 basehttp 25408 7724 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 9479
INFO 2025-07-06 21:24:48,438 basehttp 25408 8056 "GET /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 8512
INFO 2025-07-06 21:26:57,661 basehttp 25408 8056 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:27:40,555 basehttp 25408 7724 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 9479
INFO 2025-07-06 21:27:40,571 basehttp 25408 8056 "GET /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 8512
INFO 2025-07-06 21:30:09,917 autoreload 25408 16664 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\serializers.py changed, reloading.
INFO 2025-07-06 21:30:11,805 autoreload 5888 23572 Watching for file changes with StatReloader
INFO 2025-07-06 21:30:24,460 autoreload 5888 23572 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\models.py changed, reloading.
INFO 2025-07-06 21:30:26,211 autoreload 2032 29348 Watching for file changes with StatReloader
INFO 2025-07-06 21:30:34,367 autoreload 2032 29348 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\serializers.py changed, reloading.
INFO 2025-07-06 21:30:35,785 autoreload 5416 19052 Watching for file changes with StatReloader
INFO 2025-07-06 21:30:50,996 autoreload 5416 19052 C:\Users\User\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-06 21:30:52,584 autoreload 12668 3328 Watching for file changes with StatReloader
INFO 2025-07-06 21:37:05,020 autoreload 17200 18300 Watching for file changes with StatReloader
INFO 2025-07-06 21:38:57,844 basehttp 17200 13936 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:38:57,858 basehttp 17200 10208 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6241
INFO 2025-07-06 21:39:58,901 ml_service 17548 26576 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:39:58,902 ml_service 17548 26576 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:40:01,168 ml_service 17548 26576 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de manera clara la renuncia del inquilino a cualquier reclamación legal o disputa relacionada con el contrato. Esta cláusula es común en contratos de arrendamiento y no presenta ambigüedades. No se observa un desequilibrio significativo entre las partes ni una limitación de derechos fundamentales. Tampoco impone condiciones desproporcionadas ni viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:40:01,181 ml_service 17548 26576 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:40:01,181 ml_service 17548 26576 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:40:02,697 ml_service 17548 26576 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una restricción razonable en cuanto a las visitas del inquilino después de cierta hora, lo cual es común en contratos de arrendamiento. No crea un desequilibrio significativo entre las partes ni limita derechos fundamentales de manera desproporcionada. Además, al requerir autorización de la propietaria, se respeta el principio de buena fe y equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:40:02,709 ml_service 17548 26576 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:40:02,710 ml_service 17548 26576 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:40:05,023 ml_service 17548 26576 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una consecuencia clara y directa en caso de retraso en el pago, lo cual es común en contratos de arrendamiento. No crea un desequilibrio significativo entre las partes, ni limita derechos fundamentales de manera desproporcionada. Además, al tratarse de un incumplimiento por parte del arrendatario, la medida de cambiar las cerraduras sin previo aviso parece razonable para proteger los intereses de la propietaria. No se observa una violación a los principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:40:05,034 ml_service 17548 26576 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:40:05,034 ml_service 17548 26576 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:40:08,008 ml_service 17548 26576 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que establece una condición clara y específica en caso de renovación del contrato, sin embargo, es considerada abusiva según la legislación dominicana por imponer un aumento automático del 30% en el alquiler sin posibilidad de negociación. Esta cláusula crea un desequilibrio significativo entre las partes al imponer una condición unilateralmente beneficiosa para el arrendador, limitando los derechos del arrendatario a negociar condiciones justas. Además, el aumento automático sin posibilidad de negociación puede considerarse desproporcionado y violatorio de los principios de buena fe y equidad en las relaciones contractuales.', 'suggested_fix': 'Para que la cláusula sea considerada no abusiva, se podría reescribir de forma que permita la negociación del aumento de alquiler en caso de renovación del contrato, garantizando la participación equitativa de ambas partes en la determinación de las nuevas condiciones económicas.'}
INFO 2025-07-06 21:40:08,038 ml_service 17548 26576 Iniciando análisis OpenAI para 4 cláusulas
DEBUG 2025-07-06 21:40:08,039 ml_service 17548 26576 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-06 21:40:11,129 ml_service 17548 26576 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato limitan severamente los derechos del inquilino y favorecen en exceso a la propietaria, creando un desequilibrio significativo en la relación contractual.', 'recomendaciones': ['Solicitar una revisión legal detallada del contrato por un abogado especializado en arrendamientos para identificar posibles cláusulas abusivas y buscar su modificación o eliminación.', 'Negociar con la propietaria para modificar las cláusulas que imponen restricciones excesivas al inquilino y buscar un equilibrio justo en los derechos y obligaciones de ambas partes.', 'Explorar la posibilidad de buscar alternativas de vivienda si la propietaria no está dispuesta a negociar cláusulas más equitativas y respetuosas de los derechos del inquilino.']}
INFO 2025-07-06 21:41:49,252 ml_service 25904 24084 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:41:49,252 ml_service 25904 24084 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:41:51,453 ml_service 25904 24084 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de manera clara la renuncia del inquilino a cualquier reclamación legal o disputa con relación al contrato, lo cual es una práctica común en contratos de arrendamiento. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas ni viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:41:51,473 ml_service 25904 24084 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:41:51,474 ml_service 25904 24084 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:41:53,384 ml_service 25904 24084 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una restricción razonable en cuanto a las visitas del inquilino, sujeto a la autorización de la propietaria. No crea un desequilibrio significativo entre las partes, no limita derechos fundamentales de forma desproporcionada, ni viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-06 21:41:53,398 ml_service 25904 24084 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:41:53,398 ml_service 25904 24084 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:41:54,755 ml_service 25904 24084 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una consecuencia clara y directa en caso de retraso en el pago, lo cual es común en contratos de arrendamiento. No crea un desequilibrio significativo entre las partes, ni limita derechos fundamentales de forma desproporcionada. Tampoco viola principios de buena fe o equidad, ya que se refiere a una situación específica de incumplimiento contractual.', 'suggested_fix': ''}
INFO 2025-07-06 21:41:54,772 ml_service 25904 24084 Iniciando validación GPT para cláusula
DEBUG 2025-07-06 21:41:54,772 ml_service 25904 24084 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-06 21:41:56,738 ml_service 25904 24084 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que establece una condición clara y específica en caso de renovación del contrato. Sin embargo, es considerada abusiva según la legislación dominicana porque impone un aumento automático del 30% en el alquiler sin posibilidad de negociación, lo cual crea un desequilibrio significativo entre las partes al imponer una condición desproporcionada que limita la capacidad de negociación del inquilino.', 'suggested_fix': "Para que la cláusula sea considerada no abusiva, se podría reescribir de manera que se permita la negociación del aumento del alquiler en caso de renovación, respetando así la equidad entre las partes. Por ejemplo: 'En caso de renovación del contrato, el alquiler podrá aumentar hasta un máximo del 30%, sujeto a negociación entre ambas partes'."}
INFO 2025-07-06 21:41:56,773 ml_service 25904 24084 Iniciando análisis OpenAI para 4 cláusulas
DEBUG 2025-07-06 21:41:56,773 ml_service 25904 24084 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-06 21:41:58,269 ml_service 25904 24084 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato limitan los derechos del inquilino de manera significativa y unilateral, generando desequilibrio en la relación contractual.', 'recomendaciones': ['Solicitar una revisión legal detallada del contrato por un abogado especializado en arrendamientos para identificar posibles cláusulas abusivas y negociar cambios favorables.', 'Negociar la eliminación o modificación de las cláusulas abusivas para garantizar un equilibrio justo entre las partes involucradas.', 'Mantener comunicación constante con la propietaria para aclarar dudas y evitar malentendidos que puedan derivar en conflictos legales.']}
INFO 2025-07-06 21:43:29,306 autoreload 7964 21364 Watching for file changes with StatReloader
INFO 2025-07-06 21:43:47,162 basehttp 7964 28288 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:43:47,217 basehttp 7964 26716 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6241
INFO 2025-07-06 21:44:13,722 basehttp 7964 26716 "GET /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 10931
INFO 2025-07-06 21:44:13,729 basehttp 7964 28288 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 14321
INFO 2025-07-06 21:44:53,500 basehttp 7964 28288 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:44:55,285 basehttp 7964 28288 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 11657
INFO 2025-07-06 21:44:55,298 basehttp 7964 26716 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 14321
INFO 2025-07-06 21:54:33,378 basehttp 7964 13176 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-06 21:54:33,400 basehttp 7964 4388 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6241
INFO 2025-07-06 21:54:35,649 basehttp 7964 4388 "GET /api/contracts/693acb26-77a1-44fd-a303-2d4b793cb69b/ HTTP/1.1" 200 3983
INFO 2025-07-06 21:54:35,668 basehttp 7964 13176 "GET /api/clauses/?contract=693acb26-77a1-44fd-a303-2d4b793cb69b HTTP/1.1" 200 14321
INFO 2025-07-06 21:54:39,818 basehttp 7964 15368 "OPTIONS /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 0
INFO 2025-07-06 21:54:39,824 basehttp 7964 3184 "OPTIONS /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 0
INFO 2025-07-06 21:54:40,454 basehttp 7964 13176 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-06 21:54:40,461 basehttp 7964 4388 "GET /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 14321
INFO 2025-07-06 21:54:45,725 basehttp 7964 4388 "GET /api/contracts/aba55a5c-3044-48de-b9f0-a39ea59c63c1/ HTTP/1.1" 200 8057
INFO 2025-07-06 21:54:45,760 basehttp 7964 13176 "GET /api/clauses/?contract=aba55a5c-3044-48de-b9f0-a39ea59c63c1 HTTP/1.1" 200 14321
INFO 2025-07-09 17:26:40,220 autoreload 6904 14188 Watching for file changes with StatReloader
INFO 2025-07-09 18:36:19,249 autoreload 14444 17396 Watching for file changes with StatReloader
INFO 2025-07-09 18:52:39,127 basehttp 14444 3496 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-09 18:52:41,031 basehttp 14444 3496 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-09 18:52:41,038 basehttp 14444 24492 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-09 18:52:41,875 basehttp 14444 10900 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-09 18:52:43,116 basehttp 14444 5972 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1978
INFO 2025-07-09 18:52:43,403 basehttp 14444 7776 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6241
INFO 2025-07-09 18:52:49,796 basehttp 14444 3496 "OPTIONS /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 0
INFO 2025-07-09 18:52:49,797 basehttp 14444 24492 "OPTIONS /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 0
INFO 2025-07-09 18:52:52,030 basehttp 14444 7776 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 14321
INFO 2025-07-09 18:52:52,059 basehttp 14444 5972 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 11657
INFO 2025-07-09 18:52:53,338 basehttp 14444 5972 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 14321
INFO 2025-07-09 19:00:43,423 basehttp 14444 5664 "OPTIONS /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/analyze/ HTTP/1.1" 200 0
INFO 2025-07-09 19:00:46,045 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,045 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,046 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,121 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,123 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,123 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,152 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,152 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,152 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,171 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,173 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,173 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,207 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,207 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,208 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,258 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,258 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,258 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,326 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,326 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,329 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,367 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,367 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,369 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,402 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,402 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,404 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,445 ml_service 14444 15620 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:46,447 ml_service 14444 15620 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:46,447 ml_service 14444 15620 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:46,730 ml_service 14444 15620 Iniciando análisis OpenAI para 7 cláusulas
DEBUG 2025-07-09 19:00:46,730 ml_service 14444 15620 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:00:46,731 ml_service 14444 15620 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:00:46,787 views 14444 15620 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:00:46,792 basehttp 14444 15620 "POST /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/analyze/ HTTP/1.1" 200 121
INFO 2025-07-09 19:00:49,081 basehttp 14444 15620 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 11653
INFO 2025-07-09 19:00:49,279 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,280 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,280 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,325 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,326 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,327 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,363 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,366 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,366 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,403 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,403 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,403 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,442 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,444 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,446 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,481 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,481 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,481 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,530 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,530 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,530 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,553 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,553 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,553 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,581 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,583 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,583 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,613 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:49,614 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:49,614 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:49,897 ml_service 14444 20560 Iniciando análisis OpenAI para 7 cláusulas
DEBUG 2025-07-09 19:00:49,898 ml_service 14444 20560 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:00:49,898 ml_service 14444 20560 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:00:49,920 views 14444 20560 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:00:49,928 basehttp 14444 20560 "POST /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/analyze/ HTTP/1.1" 200 121
INFO 2025-07-09 19:00:51,783 basehttp 14444 20560 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 11653
INFO 2025-07-09 19:00:56,262 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,262 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,262 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,297 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,299 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,299 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,329 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,343 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,345 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,366 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,366 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,366 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,401 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,412 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,413 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,432 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,432 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,432 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,465 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,465 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,465 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,481 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,483 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,483 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,493 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,493 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,503 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,526 ml_service 14444 20560 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:00:56,526 ml_service 14444 20560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:00:56,526 ml_service 14444 20560 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:00:56,672 ml_service 14444 20560 Iniciando análisis OpenAI para 7 cláusulas
DEBUG 2025-07-09 19:00:56,673 ml_service 14444 20560 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:00:56,673 ml_service 14444 20560 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:00:56,689 views 14444 20560 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:00:56,689 basehttp 14444 20560 - Broken pipe from ('127.0.0.1', 64911)
INFO 2025-07-09 19:00:59,482 basehttp 14444 15620 "GET /api/contracts/93f7141c-855b-4e1a-bced-3728d494e1b7/ HTTP/1.1" 200 11653
INFO 2025-07-09 19:00:59,890 basehttp 14444 10000 "GET /api/clauses/?contract=93f7141c-855b-4e1a-bced-3728d494e1b7 HTTP/1.1" 200 14321
INFO 2025-07-09 19:06:02,506 autoreload 14444 17396 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\models.py changed, reloading.
INFO 2025-07-09 19:06:06,740 autoreload 19620 17356 Watching for file changes with StatReloader
INFO 2025-07-09 19:16:24,586 autoreload 5104 22448 Watching for file changes with StatReloader
INFO 2025-07-09 19:17:00,278 basehttp 5104 9892 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-09 19:17:00,283 basehttp 5104 21828 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-09 19:17:03,670 basehttp 5104 10396 - Broken pipe from ('127.0.0.1', 65430)
INFO 2025-07-09 19:17:03,777 basehttp 5104 19900 - Broken pipe from ('127.0.0.1', 65431)
INFO 2025-07-09 19:17:05,162 basehttp 5104 12240 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1974
INFO 2025-07-09 19:17:05,335 basehttp 5104 20880 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6237
INFO 2025-07-09 19:21:19,408 basehttp 5104 20836 "OPTIONS /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 0
INFO 2025-07-09 19:21:19,410 basehttp 5104 19896 "OPTIONS /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 0
INFO 2025-07-09 19:21:22,068 basehttp 5104 25432 "GET /api/clauses/?contract=289f2163-62f9-4ae2-b2a6-c7fceeaf6924 HTTP/1.1" 200 14321
INFO 2025-07-09 19:21:22,079 basehttp 5104 24000 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-09 19:22:02,250 basehttp 5104 6428 "OPTIONS /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/analyze/ HTTP/1.1" 200 0
INFO 2025-07-09 19:22:03,895 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:03,895 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:03,895 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:03,958 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:03,958 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:03,958 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:03,979 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:03,979 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:03,979 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:03,991 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:03,991 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:03,996 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,013 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,013 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,013 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,027 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,027 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,028 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,060 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,060 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,060 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,076 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,078 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,078 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,100 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,100 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,100 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,117 ml_service 5104 8036 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:04,117 ml_service 5104 8036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:04,117 ml_service 5104 8036 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:04,250 ml_service 5104 8036 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-09 19:22:04,250 ml_service 5104 8036 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:22:04,250 ml_service 5104 8036 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:22:04,272 views 5104 8036 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:22:04,274 basehttp 5104 8036 "POST /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/analyze/ HTTP/1.1" 200 122
INFO 2025-07-09 19:22:06,315 basehttp 5104 8036 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-09 19:22:06,784 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,784 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,784 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,809 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,809 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,809 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,824 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,824 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,825 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,838 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,838 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,838 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,842 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,842 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,842 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,866 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,866 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,867 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,891 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,891 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,891 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,903 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,903 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,904 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,919 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,920 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,922 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:06,933 ml_service 5104 17500 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:22:06,933 ml_service 5104 17500 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:22:06,935 ml_service 5104 17500 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:22:07,060 ml_service 5104 17500 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-09 19:22:07,060 ml_service 5104 17500 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:22:07,060 ml_service 5104 17500 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:22:07,082 views 5104 17500 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:22:07,087 basehttp 5104 17500 "POST /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/analyze/ HTTP/1.1" 200 122
INFO 2025-07-09 19:22:09,070 basehttp 5104 17500 "GET /api/contracts/289f2163-62f9-4ae2-b2a6-c7fceeaf6924/ HTTP/1.1" 200 3983
INFO 2025-07-09 19:22:13,540 basehttp 5104 23988 "OPTIONS /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 0
INFO 2025-07-09 19:22:13,541 basehttp 5104 25372 "OPTIONS /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 0
INFO 2025-07-09 19:22:13,818 basehttp 5104 8036 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6237
INFO 2025-07-09 19:22:13,874 basehttp 5104 17500 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1974
INFO 2025-07-09 19:22:15,697 basehttp 5104 22868 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 14321
INFO 2025-07-09 19:22:15,719 basehttp 5104 8036 "GET /api/contracts/eefa1816-0807-4b62-ab92-cdfe91fc75eb/ HTTP/1.1" 200 10931
INFO 2025-07-09 19:22:17,451 basehttp 5104 8036 "GET /api/clauses/?contract=eefa1816-0807-4b62-ab92-cdfe91fc75eb HTTP/1.1" 200 14321
INFO 2025-07-09 19:34:35,357 basehttp 5104 23388 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6237
INFO 2025-07-09 19:34:35,519 basehttp 5104 3288 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1974
INFO 2025-07-09 19:34:43,333 basehttp 5104 22836 "OPTIONS /api/contracts/babf6e44-8ffd-4e9a-a042-04a5b971e2d0/ HTTP/1.1" 200 0
INFO 2025-07-09 19:34:43,335 basehttp 5104 3028 "OPTIONS /api/clauses/?contract=babf6e44-8ffd-4e9a-a042-04a5b971e2d0 HTTP/1.1" 200 0
INFO 2025-07-09 19:34:45,441 basehttp 5104 24772 "GET /api/contracts/babf6e44-8ffd-4e9a-a042-04a5b971e2d0/ HTTP/1.1" 200 9177
INFO 2025-07-09 19:34:45,616 basehttp 5104 16824 "GET /api/clauses/?contract=babf6e44-8ffd-4e9a-a042-04a5b971e2d0 HTTP/1.1" 200 14321
INFO 2025-07-09 19:35:36,730 basehttp 5104 10728 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-09 19:35:39,083 basehttp 5104 14956 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-09 19:35:57,504 basehttp 5104 24444 "OPTIONS /api/contracts/ HTTP/1.1" 200 0
INFO 2025-07-09 19:35:59,284 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,284 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,284 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,294 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,294 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,294 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,307 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,319 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,319 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,323 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,323 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,323 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,342 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,342 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,342 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,356 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,356 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,356 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,370 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,370 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,370 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,387 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,394 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,394 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,403 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,403 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,403 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,427 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,427 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,427 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,436 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,436 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,436 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,455 ml_service 5104 20048 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:35:59,455 ml_service 5104 20048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:35:59,455 ml_service 5104 20048 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:35:59,549 ml_service 5104 20048 Iniciando análisis OpenAI para 11 cláusulas
DEBUG 2025-07-09 19:35:59,549 ml_service 5104 20048 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:35:59,549 ml_service 5104 20048 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:35:59,558 views 5104 20048 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:35:59,558 basehttp 5104 20048 "POST /api/contracts/ HTTP/1.1" 201 3216
INFO 2025-07-09 19:35:59,594 basehttp 5104 24444 "OPTIONS /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/ HTTP/1.1" 200 0
INFO 2025-07-09 19:35:59,594 basehttp 5104 17992 "OPTIONS /api/clauses/?contract=47d4e7ca-cd4f-4434-8fee-63301d2097ab HTTP/1.1" 200 0
INFO 2025-07-09 19:36:01,469 basehttp 5104 20048 "GET /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/ HTTP/1.1" 200 3640
INFO 2025-07-09 19:36:01,537 basehttp 5104 18208 "GET /api/clauses/?contract=47d4e7ca-cd4f-4434-8fee-63301d2097ab HTTP/1.1" 200 14321
INFO 2025-07-09 19:38:13,499 basehttp 5104 20184 "OPTIONS /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/analyze/ HTTP/1.1" 200 0
INFO 2025-07-09 19:38:15,519 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,519 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,519 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,535 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,535 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,535 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,551 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,551 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,551 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,570 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,570 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,572 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,582 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,582 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,582 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,590 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,598 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,598 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,601 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,601 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,601 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,622 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,622 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,622 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,637 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,637 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,637 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,646 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,646 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,646 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,672 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,672 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,672 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,676 ml_service 5104 2232 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:38:15,676 ml_service 5104 2232 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
ERROR 2025-07-09 19:38:15,676 ml_service 5104 2232 Error en validación GPT: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 270, in _validate_clause_with_gpt
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
INFO 2025-07-09 19:38:15,791 ml_service 5104 2232 Iniciando análisis OpenAI para 11 cláusulas
DEBUG 2025-07-09 19:38:15,791 ml_service 5104 2232 Enviando solicitud a OpenAI API para análisis general
ERROR 2025-07-09 19:38:15,791 ml_service 5104 2232 Error en el análisis de OpenAI: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 188, in _get_openai_analysis
    api_key = config('OPENAI_API_KEY')
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 248, in __call__
    return self.config(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 107, in __call__
    return self.get(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\decouple.py", line 92, in get
    raise UndefinedValueError('{} not found. Declare it as envvar or define a default value.'.format(option))
decouple.UndefinedValueError: OPENAI_API_KEY not found. Declare it as envvar or define a default value.
ERROR 2025-07-09 19:38:15,791 views 5104 2232 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_is_abusive
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 227, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_is_abusive

INFO 2025-07-09 19:38:15,803 basehttp 5104 2232 "POST /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/analyze/ HTTP/1.1" 200 122
INFO 2025-07-09 19:38:17,517 basehttp 5104 2232 "GET /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/ HTTP/1.1" 200 3640
INFO 2025-07-09 19:38:21,195 basehttp 5104 2232 "GET /api/contracts/47d4e7ca-cd4f-4434-8fee-63301d2097ab/ HTTP/1.1" 200 3640
INFO 2025-07-09 19:38:21,371 basehttp 5104 22252 "GET /api/clauses/?contract=47d4e7ca-cd4f-4434-8fee-63301d2097ab HTTP/1.1" 200 14321
INFO 2025-07-09 19:41:16,190 autoreload 17164 17312 Watching for file changes with StatReloader
INFO 2025-07-09 19:51:42,000 basehttp 17164 15120 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-09 19:52:01,703 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:01,703 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:06,293 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida, ya que establece claramente los términos del contrato de alquiler entre el propietario y la inquilina. Sin embargo, es considerada abusiva según la legislación dominicana por imponer una condición desproporcionada al requerir que el inquilino pague el alquiler en efectivo únicamente y sin ningún tipo de recibo o constancia escrita. Esta condición limita los derechos del inquilino y crea un desequilibrio significativo entre las partes, ya que el inquilino queda desprotegido al no contar con evidencia de pago en caso de disputa.', 'suggested_fix': 'Para que la cláusula sea considerada no abusiva, se podría modificar para permitir que el inquilino realice el pago del alquiler mediante transferencia bancaria u otro medio electrónico que permita tener un registro de pago. De esta forma, se garantiza la protección de los derechos del inquilino y se evita el desequilibrio entre las partes.'}
INFO 2025-07-09 19:52:06,335 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:06,335 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:08,309 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida, ya que establece las consecuencias en caso de rescisión anticipada del contrato por parte de la inquilina. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas, ni viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-09 19:52:08,335 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:08,335 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:11,873 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida ya que establece un derecho del propietario de ingresar a la propiedad sin previo aviso ni consentimiento de la inquilina. Sin embargo, esta cláusula es considerada abusiva según la legislación dominicana, ya que crea un desequilibrio significativo entre las partes al otorgar al propietario un poder excesivo sobre la propiedad al no requerir consentimiento ni previo aviso, lo cual limita los derechos fundamentales de la inquilina y viola principios de equidad y buena fe.', 'suggested_fix': 'Para reescribir de forma no abusiva, se podría modificar la cláusula para establecer que el propietario solo podrá ingresar a la propiedad en casos de emergencia o previa notificación a la inquilina, respetando así los derechos y la privacidad de esta última.'}
INFO 2025-07-09 19:52:11,891 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:11,891 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:15,572 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida ya que establece una modificación unilateral por parte del propietario sin necesidad de acuerdo con la inquilina. Sin embargo, es considerada abusiva según la legislación dominicana porque crea un desequilibrio significativo entre las partes al permitir al propietario modificar el contrato sin previo aviso ni acuerdo, lo cual limita los derechos de la inquilina y viola principios de buena fe y equidad.', 'suggested_fix': "Para que la cláusula sea considerada no abusiva, se podría reescribir de la siguiente manera: 'El propietario podrá modificar las condiciones del contrato previo acuerdo con la inquilina y notificación por escrito con al menos 30 días de antelación'. De esta forma se establece un proceso de modificación que respeta los derechos y la equidad entre las partes."}
INFO 2025-07-09 19:52:15,584 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:15,584 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:17,933 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto es una cláusula contractual válida ya que establece claramente la responsabilidad de la inquilina por las reparaciones del inmueble, incluso en casos de desgaste natural o defectos estructurales. No se observa que genere un desequilibrio significativo entre las partes, limite derechos fundamentales, imponga condiciones desproporcionadas o viole principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-09 19:52:17,950 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:17,950 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:20,368 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que establece un acuerdo entre las partes, sin embargo, es considerada abusiva según la legislación dominicana por crear un desequilibrio significativo entre las partes. Al renunciar la inquilina a cualquier acción legal contra el propietario y aceptar que cualquier disputa se resolverá exclusivamente según la voluntad del propietario, se limitan los derechos fundamentales de la inquilina y se impone una condición desproporcionada que viola los principios de buena fe y equidad.', 'suggested_fix': "Para que la cláusula sea considerada no abusiva, se podría reescribir de la siguiente manera: 'Ambas partes acuerdan resolver cualquier disputa de manera amistosa y, en caso de no llegar a un acuerdo, someter la controversia a mediación o arbitraje neutral.'"}
INFO 2025-07-09 19:52:20,380 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:20,380 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:23,159 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una restricción razonable sobre las visitas que puede recibir el inquilino en el apartamento, especificando que solo pueden ser familiares directos con autorización previa del propietario. Esta restricción es común en contratos de arrendamiento y busca proteger la tranquilidad y seguridad del edificio. No se observa un desequilibrio significativo entre las partes ni una imposición desproporcionada, y no limita derechos fundamentales de manera injustificada. Por tanto, no se considera abusiva.', 'suggested_fix': ''}
INFO 2025-07-09 19:52:23,174 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:23,174 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:25,941 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida porque está redactada de manera clara y precisa, indicando las obligaciones de la inquilina. Sin embargo, es considerada abusiva según la legislación dominicana porque impone a la inquilina la renuncia a servicios básicos como agua potable, electricidad o gas, lo cual crea un desequilibrio significativo entre las partes y limita derechos fundamentales.', 'suggested_fix': 'Se sugiere reescribir la cláusula de forma que la inquilina no renuncie a servicios básicos esenciales, y en su lugar se establezca claramente la responsabilidad de cada parte en cuanto a la gestión y pago de dichos servicios.'}
INFO 2025-07-09 19:52:25,960 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:25,960 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:29,890 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que establece una obligación clara de pago por parte de la inquilina y las consecuencias del retraso en el pago. Sin embargo, es considerada abusiva según la legislación dominicana por crear un desequilibrio significativo entre las partes al permitir al propietario desalojar a la inquilina inmediatamente y sin necesidad de proceso legal en caso de retraso en el pago. Esta cláusula limita los derechos fundamentales de la inquilina y viola el principio de equidad.', 'suggested_fix': "Para que la cláusula sea considerada no abusiva, se podría reescribir de la siguiente manera: 'En caso de retraso en el pago, EL PROPIETARIO podrá notificar a la INQUILINA sobre el mismo y darle un plazo razonable para regularizar la situación antes de iniciar cualquier acción legal para el desalojo.'"}
INFO 2025-07-09 19:52:29,904 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:29,904 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:32,392 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece una obligación clara y específica en caso de fallecimiento de la inquilina, la cual es continuar pagando el alquiler hasta el final del contrato. Esta disposición es común en contratos de arrendamiento y no presenta un desequilibrio significativo entre las partes ni limita derechos fundamentales de manera abusiva. Además, no impone condiciones desproporcionadas ni viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-09 19:52:32,418 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:32,418 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:35,235 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'El texto es una cláusula contractual válida, ya que establece la duración del contrato y la posibilidad de terminarlo unilateralmente por parte del PROPIETARIO. Sin embargo, es considerada abusiva según la legislación dominicana, ya que otorga al PROPIETARIO un poder unilateral excesivo al permitirle finalizar el contrato en cualquier momento, sin previo aviso ni justificación, lo cual crea un desequilibrio significativo entre las partes y limita los derechos del otro contratante.', 'suggested_fix': "Para que la cláusula sea considerada no abusiva, se podría reescribir de la siguiente manera: 'El presente contrato tendrá una vigencia de UN (1) año, salvo causa justificada por parte del PROPIETARIO, quien podrá finalizarlo previo aviso de al menos 30 días al otro contratante.' De esta forma, se establece un mecanismo de terminación que respeta los derechos y la equidad entre las partes."}
INFO 2025-07-09 19:52:35,252 ml_service 17164 9876 Iniciando validación GPT para cláusula
DEBUG 2025-07-09 19:52:35,252 ml_service 17164 9876 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-09 19:52:38,904 ml_service 17164 9876 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es válida en el sentido de que está redactada de forma clara y precisa dentro del contrato. Sin embargo, es considerada abusiva según la legislación dominicana porque impone un aumento automático del 50% en el alquiler en caso de renovación, sin posibilidad de negociación por parte del inquilino. Esta cláusula crea un desequilibrio significativo entre las partes al imponer una condición desproporcionada que limita los derechos fundamentales del inquilino a negociar condiciones justas.', 'suggested_fix': 'Para que la cláusula sea considerada no abusiva, se podría reescribir de manera que se permita la negociación entre ambas partes en caso de renovación, evitando imponer un aumento automático sin posibilidad de diálogo. Por ejemplo, se podría establecer que el aumento en el alquiler esté sujeto a acuerdo mutuo entre el arrendador y el inquilino, respetando los principios de buena fe y equidad.'}
INFO 2025-07-09 19:52:39,029 ml_service 17164 9876 Iniciando análisis OpenAI para 12 cláusulas
DEBUG 2025-07-09 19:52:39,029 ml_service 17164 9876 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-09 19:52:40,779 ml_service 17164 9876 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato presentan desequilibrio de derechos en favor del propietario, exponiendo a la inquilina a posibles abusos y limitaciones significativas en sus derechos como arrendataria.', 'recomendaciones': ['Negociar la eliminación o modificación de las cláusulas abusivas con el propietario antes de firmar el contrato.', 'Consultar con un abogado especializado en arrendamientos para evaluar la legalidad de las cláusulas y recibir asesoramiento adecuado.', 'Considerar buscar otras opciones de alquiler que respeten los derechos y equilibren las responsabilidades entre ambas partes.']}
INFO 2025-07-09 19:52:40,852 basehttp 17164 9876 "POST /api/contracts/ HTTP/1.1" 201 3205
INFO 2025-07-09 19:52:41,236 basehttp 17164 24268 "OPTIONS /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 0
INFO 2025-07-09 19:52:41,239 basehttp 17164 7512 "OPTIONS /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 0
INFO 2025-07-09 19:52:42,613 basehttp 17164 9876 "GET /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 19646
INFO 2025-07-09 19:52:42,930 basehttp 17164 1756 "GET /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 21966
INFO 2025-07-10 12:27:55,335 autoreload 4560 23088 Watching for file changes with StatReloader
INFO 2025-07-10 12:29:34,312 basehttp 4560 22424 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-10 12:29:34,320 basehttp 4560 7208 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-10 12:29:36,862 basehttp 4560 3940 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1971
INFO 2025-07-10 12:29:36,920 basehttp 4560 24492 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6963
INFO 2025-07-10 12:29:39,447 basehttp 4560 26088 "OPTIONS /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 0
INFO 2025-07-10 12:29:39,451 basehttp 4560 26088 "OPTIONS /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 0
INFO 2025-07-10 12:29:41,283 basehttp 4560 24492 "GET /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 19646
INFO 2025-07-10 12:29:41,307 basehttp 4560 3940 "GET /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 21966
INFO 2025-07-10 12:32:36,337 basehttp 4560 3656 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1971
INFO 2025-07-10 12:44:56,089 basehttp 4560 9928 "OPTIONS /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 0
INFO 2025-07-10 12:44:56,101 basehttp 4560 12480 "OPTIONS /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 0
INFO 2025-07-10 12:44:58,270 basehttp 4560 12504 "GET /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 21966
INFO 2025-07-10 12:44:58,276 basehttp 4560 17544 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6241
INFO 2025-07-10 12:45:00,898 basehttp 4560 17544 "GET /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 21966
INFO 2025-07-10 12:47:47,854 basehttp 4560 27032 "OPTIONS /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 0
INFO 2025-07-10 12:47:50,414 ml_service 4560 7584 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 12:47:50,416 ml_service 4560 7584 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 12:47:52,568 ml_service 4560 7584 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que cumple con los requisitos básicos de un contrato, como la identificación de las partes, el objeto del contrato (venta de un vehículo) y la descripción detallada del bien vendido. No se observa ninguna característica abusiva en la cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-10 12:47:52,687 ml_service 4560 7584 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 12:47:52,688 ml_service 4560 7584 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 12:47:54,723 ml_service 4560 7584 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que establece de manera clara y precisa el acuerdo entre las partes en relación al precio de venta del vehículo, así como las obligaciones y derechos de cada una. No se observa ninguna característica que la haga inválida. Además, no se considera abusiva ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-10 12:47:54,773 ml_service 4560 7584 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 12:47:54,773 ml_service 4560 7584 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 12:47:57,410 ml_service 4560 7584 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de manera clara y precisa la autorización de traspaso de la matrícula original entre las partes contratantes. No se observa ninguna irregularidad que la invalide. Además, no se identifica ninguna característica abusiva en la cláusula, ya que no crea desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
ERROR 2025-07-10 12:47:57,707 views 4560 7584 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 198, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 484, in analyze_contract
    summary = self._generate_summary(clause_results, risk_score)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 383, in _generate_summary
    abusive_count = sum(1 for c in clause_results if c['is_abusive'])
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 383, in <genexpr>
    abusive_count = sum(1 for c in clause_results if c['is_abusive'])
                                                     ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 12:47:57,712 basehttp 4560 7584 "POST /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 121
INFO 2025-07-10 12:48:00,007 basehttp 4560 7584 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6237
INFO 2025-07-10 12:53:50,185 autoreload 4560 23088 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-10 12:53:53,743 autoreload 18840 17028 Watching for file changes with StatReloader
INFO 2025-07-10 13:01:31,194 autoreload 19944 5144 Watching for file changes with StatReloader
INFO 2025-07-10 13:05:44,999 basehttp 19944 25392 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1971
INFO 2025-07-10 13:05:45,053 basehttp 19944 13332 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6959
INFO 2025-07-10 13:05:53,900 basehttp 19944 13332 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6237
INFO 2025-07-10 13:05:53,931 basehttp 19944 25392 "GET /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 21966
INFO 2025-07-10 13:08:34,984 ml_service 19944 24720 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 13:08:34,984 ml_service 19944 24720 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 13:08:37,559 ml_service 19944 24720 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que establece de manera clara y precisa el objeto del contrato, que es la venta y traspaso de un vehículo en condiciones específicas. No se observa ninguna irregularidad que la invalide. Además, no se considera abusiva ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-10 13:08:37,669 ml_service 19944 24720 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 13:08:37,669 ml_service 19944 24720 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 13:08:40,519 ml_service 19944 24720 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que establece de manera clara y precisa el acuerdo entre las partes en cuanto al precio del vehículo, los pagos realizados y las obligaciones correspondientes. No se observa un desequilibrio significativo entre las partes ni limitación de derechos fundamentales. Además, la cláusula cumple con los requisitos de transparencia y buena fe en la relación contractual.', 'suggested_fix': ''}
INFO 2025-07-10 13:08:40,591 ml_service 19944 24720 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 13:08:40,591 ml_service 19944 24720 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 13:08:43,465 ml_service 19944 24720 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto analizado es una cláusula contractual válida, ya que establece de manera clara y precisa la autorización de traspaso de la matrícula original entre las partes. No se observa ninguna característica que indique que sea abusiva, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
ERROR 2025-07-10 13:08:43,619 views 19944 24720 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 198, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 500, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 13:08:43,623 basehttp 19944 24720 "POST /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 121
INFO 2025-07-10 13:08:46,041 basehttp 19944 2096 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6237
INFO 2025-07-10 14:57:54,238 basehttp 19944 27472 "OPTIONS /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 0
INFO 2025-07-10 14:57:55,455 ml_service 19944 21036 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 14:57:55,455 ml_service 19944 21036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 14:57:58,770 ml_service 19944 21036 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que establece de manera clara y precisa el objeto del contrato, que es la venta y transferencia de un vehículo en condiciones específicas. No se observa ninguna irregularidad que la invalide. Además, no se identifican elementos abusivos en la cláusula, ya que no crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-10 14:57:58,803 ml_service 19944 21036 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 14:57:58,803 ml_service 19944 21036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 14:58:01,183 ml_service 19944 21036 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que establece de manera clara y precisa el precio acordado entre las partes para la venta del vehículo, así como las obligaciones y derechos derivados de dicho acuerdo. No crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad. Por tanto, no se considera abusiva.', 'suggested_fix': ''}
INFO 2025-07-10 14:58:01,215 ml_service 19944 21036 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 14:58:01,215 ml_service 19944 21036 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 14:58:03,401 ml_service 19944 21036 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de manera clara y precisa la autorización de traspaso de la matrícula original entre las partes. No se observa ninguna irregularidad que la invalide. Además, no se identifica ninguna característica abusiva en la cláusula, ya que no crea desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
ERROR 2025-07-10 14:58:03,494 views 19944 21036 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 198, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 500, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 14:58:03,497 basehttp 19944 21036 "POST /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 121
INFO 2025-07-10 14:58:03,821 basehttp 19944 17296 "OPTIONS /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 0
INFO 2025-07-10 14:58:04,642 basehttp 19944 21036 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6237
INFO 2025-07-10 15:10:35,698 autoreload 19944 5144 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-10 15:10:41,436 autoreload 17400 11604 Watching for file changes with StatReloader
INFO 2025-07-10 15:15:24,423 autoreload 17400 11604 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py changed, reloading.
INFO 2025-07-10 15:15:27,147 autoreload 8776 19368 Watching for file changes with StatReloader
INFO 2025-07-10 15:18:20,511 basehttp 8776 16844 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-10 15:18:20,516 basehttp 8776 25036 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-10 15:18:22,213 basehttp 8776 21600 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1971
INFO 2025-07-10 15:18:22,258 basehttp 8776 19468 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6959
INFO 2025-07-10 15:18:25,784 basehttp 8776 25036 "OPTIONS /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 0
INFO 2025-07-10 15:18:27,510 basehttp 8776 19468 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 6237
INFO 2025-07-10 15:18:27,610 basehttp 8776 21600 "GET /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 21966
INFO 2025-07-10 15:18:38,213 ml_service 8776 17332 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:18:38,213 ml_service 8776 17332 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:18:40,184 ml_service 8776 17332 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula analizada es válida ya que cumple con los requisitos básicos de un contrato, como la identificación de las partes, el objeto del contrato y la descripción detallada del bien objeto de la transacción. Además, no se observa ninguna característica que la haga abusiva según la legislación dominicana.', 'suggested_fix': ''}
INFO 2025-07-10 15:18:40,212 ml_service 8776 17332 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:18:40,212 ml_service 8776 17332 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:18:41,754 ml_service 8776 17332 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'La cláusula es válida ya que establece de forma clara y precisa el precio acordado entre las partes, las obligaciones de cada una y los documentos que se entregarán. No crea un desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
INFO 2025-07-10 15:18:41,785 ml_service 8776 17332 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:18:41,785 ml_service 8776 17332 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:18:44,255 ml_service 8776 17332 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': 'El texto analizado es una cláusula contractual válida, ya que establece de manera clara y precisa la autorización de traspaso de la matrícula original entre las partes. No se observa ninguna característica que indique que la cláusula sea abusiva según la legislación dominicana, ya que no crea desequilibrio significativo entre las partes, no limita derechos fundamentales, no impone condiciones desproporcionadas y no viola principios de buena fe o equidad.', 'suggested_fix': ''}
ERROR 2025-07-10 15:18:44,323 views 8776 17332 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 210, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 500, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 419, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 15:18:44,323 basehttp 8776 17332 "POST /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 122
INFO 2025-07-10 15:18:45,174 basehttp 8776 17332 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 2640
INFO 2025-07-10 15:29:19,923 autoreload 8776 19368 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-10 15:29:21,824 autoreload 25844 18040 Watching for file changes with StatReloader
INFO 2025-07-10 15:35:34,549 ml_service 25844 12560 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:35:34,549 ml_service 25844 12560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:35:36,121 ml_service 25844 12560 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 15:35:36,148 ml_service 25844 12560 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:35:36,148 ml_service 25844 12560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:35:37,389 ml_service 25844 12560 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 15:35:37,429 ml_service 25844 12560 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:35:37,429 ml_service 25844 12560 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:35:38,818 ml_service 25844 12560 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Otro'}
ERROR 2025-07-10 15:35:38,884 views 25844 12560 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 210, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 501, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 15:35:38,888 basehttp 25844 12560 "POST /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/analyze/ HTTP/1.1" 200 122
INFO 2025-07-10 15:35:39,811 basehttp 25844 12560 "GET /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 200 2640
INFO 2025-07-10 15:35:51,022 basehttp 25844 24700 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 15:35:51,058 basehttp 25844 21644 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6943
INFO 2025-07-10 15:35:55,490 basehttp 25844 21644 "GET /api/clauses/?contract=57de40b8-0880-4e27-b85d-3e2c5d80f7d5 HTTP/1.1" 200 21966
INFO 2025-07-10 15:35:58,463 basehttp 25844 21644 "DELETE /api/contracts/57de40b8-0880-4e27-b85d-3e2c5d80f7d5/ HTTP/1.1" 204 0
INFO 2025-07-10 15:35:59,991 basehttp 25844 21644 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 15:36:00,109 basehttp 25844 24700 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6614
INFO 2025-07-10 15:37:22,786 basehttp 25844 26072 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-10 15:37:23,934 basehttp 25844 13596 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 15:37:33,364 basehttp 25844 11044 "OPTIONS /api/contracts/ HTTP/1.1" 200 0
INFO 2025-07-10 15:37:34,609 ml_service 25844 25812 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:37:34,609 ml_service 25844 25812 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:37:35,701 ml_service 25844 25812 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-10 15:37:35,725 ml_service 25844 25812 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:37:35,725 ml_service 25844 25812 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:37:36,683 ml_service 25844 25812 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 15:37:36,713 ml_service 25844 25812 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:37:36,713 ml_service 25844 25812 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:37:37,979 ml_service 25844 25812 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Otro'}
ERROR 2025-07-10 15:37:38,045 views 25844 25812 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 210, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 501, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 15:37:38,045 basehttp 25844 25812 "POST /api/contracts/ HTTP/1.1" 201 2233
INFO 2025-07-10 15:37:38,092 basehttp 25844 11044 "OPTIONS /api/contracts/2648490e-0351-4e89-921d-e196e2c6e6ed/ HTTP/1.1" 200 0
INFO 2025-07-10 15:37:38,092 basehttp 25844 24892 "OPTIONS /api/clauses/?contract=2648490e-0351-4e89-921d-e196e2c6e6ed HTTP/1.1" 200 0
INFO 2025-07-10 15:37:39,123 basehttp 25844 25812 "GET /api/contracts/2648490e-0351-4e89-921d-e196e2c6e6ed/ HTTP/1.1" 200 2640
INFO 2025-07-10 15:37:39,131 basehttp 25844 21076 "GET /api/clauses/?contract=2648490e-0351-4e89-921d-e196e2c6e6ed HTTP/1.1" 200 21966
INFO 2025-07-10 15:37:58,471 basehttp 25844 23396 "DELETE /api/contracts/2648490e-0351-4e89-921d-e196e2c6e6ed/ HTTP/1.1" 204 0
INFO 2025-07-10 15:37:59,675 basehttp 25844 23396 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 15:37:59,691 basehttp 25844 14668 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6614
INFO 2025-07-10 15:38:03,413 basehttp 25844 27204 "OPTIONS /api/contracts/882c9533-c235-46cd-b304-b9e7020957fe/ HTTP/1.1" 200 0
INFO 2025-07-10 15:38:03,417 basehttp 25844 7788 "OPTIONS /api/clauses/?contract=882c9533-c235-46cd-b304-b9e7020957fe HTTP/1.1" 200 0
INFO 2025-07-10 15:38:04,793 basehttp 25844 22776 "GET /api/contracts/882c9533-c235-46cd-b304-b9e7020957fe/ HTTP/1.1" 200 1983
INFO 2025-07-10 15:38:04,810 basehttp 25844 4916 "GET /api/clauses/?contract=882c9533-c235-46cd-b304-b9e7020957fe HTTP/1.1" 200 21966
INFO 2025-07-10 15:38:08,368 basehttp 25844 4916 "DELETE /api/contracts/882c9533-c235-46cd-b304-b9e7020957fe/ HTTP/1.1" 204 0
INFO 2025-07-10 15:38:10,034 basehttp 25844 22776 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6260
INFO 2025-07-10 15:38:10,041 basehttp 25844 4916 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 15:38:10,967 basehttp 25844 7788 "OPTIONS /api/contracts/e8fe350b-b4f9-43f5-8c77-d79762fc2e5d/ HTTP/1.1" 200 0
INFO 2025-07-10 15:38:10,971 basehttp 25844 27204 "OPTIONS /api/clauses/?contract=e8fe350b-b4f9-43f5-8c77-d79762fc2e5d HTTP/1.1" 200 0
INFO 2025-07-10 15:38:12,119 basehttp 25844 4916 "GET /api/contracts/e8fe350b-b4f9-43f5-8c77-d79762fc2e5d/ HTTP/1.1" 200 2648
INFO 2025-07-10 15:38:12,163 basehttp 25844 22776 "GET /api/clauses/?contract=e8fe350b-b4f9-43f5-8c77-d79762fc2e5d HTTP/1.1" 200 21966
INFO 2025-07-10 15:38:15,705 basehttp 25844 22776 "DELETE /api/contracts/e8fe350b-b4f9-43f5-8c77-d79762fc2e5d/ HTTP/1.1" 204 0
INFO 2025-07-10 15:38:17,236 basehttp 25844 22776 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 15:38:17,330 basehttp 25844 4916 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5884
INFO 2025-07-10 15:39:21,009 ml_service 25844 15800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:39:21,009 ml_service 25844 15800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:39:22,103 ml_service 25844 15800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Otro'}
INFO 2025-07-10 15:39:22,130 ml_service 25844 15800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:39:22,130 ml_service 25844 15800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:39:23,723 ml_service 25844 15800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 15:39:23,739 ml_service 25844 15800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 15:39:23,739 ml_service 25844 15800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 15:39:24,886 ml_service 25844 15800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
ERROR 2025-07-10 15:39:24,976 views 25844 15800 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 210, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 501, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 420, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 15:39:24,976 basehttp 25844 15800 "POST /api/contracts/ HTTP/1.1" 201 2234
INFO 2025-07-10 15:39:25,342 basehttp 25844 27056 "OPTIONS /api/contracts/161c520e-5c59-44db-a017-04d0f8f560d7/ HTTP/1.1" 200 0
INFO 2025-07-10 15:39:25,342 basehttp 25844 13152 "OPTIONS /api/clauses/?contract=161c520e-5c59-44db-a017-04d0f8f560d7 HTTP/1.1" 200 0
INFO 2025-07-10 15:39:26,358 basehttp 25844 15800 "GET /api/contracts/161c520e-5c59-44db-a017-04d0f8f560d7/ HTTP/1.1" 200 2641
INFO 2025-07-10 15:39:26,650 basehttp 25844 7488 "GET /api/clauses/?contract=161c520e-5c59-44db-a017-04d0f8f560d7 HTTP/1.1" 200 21966
INFO 2025-07-10 15:42:46,068 autoreload 25844 18040 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-10 15:42:47,905 autoreload 27292 13168 Watching for file changes with StatReloader
INFO 2025-07-10 15:43:03,157 autoreload 27292 13168 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-10 15:43:07,450 autoreload 13412 24080 Watching for file changes with StatReloader
INFO 2025-07-10 16:27:10,927 autoreload 11056 20040 Watching for file changes with StatReloader
INFO 2025-07-10 16:30:22,395 basehttp 11056 964 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 16:33:29,640 ml_service 11056 24800 Iniciando análisis de contrato...
INFO 2025-07-10 16:33:29,640 ml_service 11056 24800 Iniciando extracción de cláusulas con GPT
INFO 2025-07-10 16:33:37,497 ml_service 11056 24800 Cláusulas extraídas exitosamente con GPT: 3 cláusulas.
INFO 2025-07-10 16:33:37,497 ml_service 11056 24800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:33:37,497 ml_service 11056 24800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:33:39,514 ml_service 11056 24800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 16:33:39,563 ml_service 11056 24800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:33:39,563 ml_service 11056 24800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:33:41,327 ml_service 11056 24800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 16:33:41,357 ml_service 11056 24800 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:33:41,357 ml_service 11056 24800 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:33:42,916 ml_service 11056 24800 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Otro'}
ERROR 2025-07-10 16:33:42,949 views 11056 24800 Error en análisis síncrono: 'is_abusive'
Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 210, in trigger_analysis_sync
    analysis_result = ml_service.analyze_contract(contract.original_text)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 544, in analyze_contract
    recommendations = self._generate_recommendations(clause_results)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 482, in _generate_recommendations
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py", line 482, in <listcomp>
    abusive_clauses = [c for c in clause_results if c['is_abusive']]
                                                    ~^^^^^^^^^^^^^^
KeyError: 'is_abusive'

INFO 2025-07-10 16:33:42,954 basehttp 11056 24800 "POST /api/contracts/ HTTP/1.1" 201 2230
INFO 2025-07-10 16:33:43,358 basehttp 11056 18696 "OPTIONS /api/clauses/?contract=2b25531a-57aa-476d-b185-122f016f059f HTTP/1.1" 200 0
INFO 2025-07-10 16:33:43,391 basehttp 11056 22540 "OPTIONS /api/contracts/2b25531a-57aa-476d-b185-122f016f059f/ HTTP/1.1" 200 0
INFO 2025-07-10 16:33:44,508 basehttp 11056 24800 "GET /api/clauses/?contract=2b25531a-57aa-476d-b185-122f016f059f HTTP/1.1" 200 21966
INFO 2025-07-10 16:33:44,777 basehttp 11056 18920 "GET /api/contracts/2b25531a-57aa-476d-b185-122f016f059f/ HTTP/1.1" 200 2637
INFO 2025-07-10 16:37:53,957 autoreload 11056 20040 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\ml_analysis\ml_service.py changed, reloading.
INFO 2025-07-10 16:37:55,670 autoreload 22076 19828 Watching for file changes with StatReloader
INFO 2025-07-10 16:39:24,697 autoreload 23308 21040 Watching for file changes with StatReloader
INFO 2025-07-10 16:39:44,396 basehttp 23308 7016 "DELETE /api/contracts/2b25531a-57aa-476d-b185-122f016f059f/ HTTP/1.1" 204 0
INFO 2025-07-10 16:39:46,263 basehttp 23308 7016 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1947
INFO 2025-07-10 16:39:46,407 basehttp 23308 25072 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6214
INFO 2025-07-10 16:41:04,619 basehttp 23308 27624 "GET /api/clauses/?contract=161c520e-5c59-44db-a017-04d0f8f560d7 HTTP/1.1" 200 21966
INFO 2025-07-10 16:41:04,658 basehttp 23308 18880 "GET /api/contracts/161c520e-5c59-44db-a017-04d0f8f560d7/ HTTP/1.1" 200 2641
INFO 2025-07-10 16:41:08,159 basehttp 23308 10736 "DELETE /api/contracts/161c520e-5c59-44db-a017-04d0f8f560d7/ HTTP/1.1" 204 0
INFO 2025-07-10 16:41:09,718 basehttp 23308 10736 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1970
INFO 2025-07-10 16:41:09,745 basehttp 23308 16436 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5884
INFO 2025-07-10 16:41:18,390 basehttp 23308 10344 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 16:41:31,640 ml_service 23308 4732 Iniciando análisis de contrato...
INFO 2025-07-10 16:41:31,640 ml_service 23308 4732 Iniciando extracción de cláusulas con GPT
INFO 2025-07-10 16:41:37,976 ml_service 23308 4732 Cláusulas extraídas exitosamente con GPT: 3 cláusulas.
INFO 2025-07-10 16:41:37,976 ml_service 23308 4732 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:41:37,976 ml_service 23308 4732 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:41:39,546 ml_service 23308 4732 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 16:41:39,596 ml_service 23308 4732 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:41:39,596 ml_service 23308 4732 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:41:40,993 ml_service 23308 4732 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 16:41:41,022 ml_service 23308 4732 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:41:41,022 ml_service 23308 4732 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:41:41,946 ml_service 23308 4732 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 16:41:41,962 ml_service 23308 4732 Análisis completado en 10.32 segundos.
ERROR 2025-07-10 16:41:41,988 views 23308 4732 Error en análisis síncrono: NOT NULL constraint failed: contracts_clause.gpt_explanation
Traceback (most recent call last):
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_explanation

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\views.py", line 239, in trigger_analysis_sync
    Clause.objects.create(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 902, in save
    self.save_base(
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\models\sql\compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zaloke\anaconda3\envs\contract-analysis\Lib\site-packages\django\db\backends\sqlite3\base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: contracts_clause.gpt_explanation

INFO 2025-07-10 16:41:41,988 basehttp 23308 4732 "POST /api/contracts/ HTTP/1.1" 201 2237
INFO 2025-07-10 16:41:42,349 basehttp 23308 23700 "OPTIONS /api/contracts/2813e974-0795-47ac-8858-ab1b63f6b04b/ HTTP/1.1" 200 0
INFO 2025-07-10 16:41:42,349 basehttp 23308 3860 "OPTIONS /api/clauses/?contract=2813e974-0795-47ac-8858-ab1b63f6b04b HTTP/1.1" 200 0
INFO 2025-07-10 16:41:43,896 basehttp 23308 4732 "GET /api/contracts/2813e974-0795-47ac-8858-ab1b63f6b04b/ HTTP/1.1" 200 2644
INFO 2025-07-10 16:41:44,208 basehttp 23308 3968 "GET /api/clauses/?contract=2813e974-0795-47ac-8858-ab1b63f6b04b HTTP/1.1" 200 21966
INFO 2025-07-10 16:43:55,718 autoreload 23308 21040 C:\Users\zaloke\Documents\GitHub\Proyecto-grado-ICC\backend\contracts\models.py changed, reloading.
INFO 2025-07-10 16:43:57,454 autoreload 24252 22172 Watching for file changes with StatReloader
INFO 2025-07-10 16:46:50,836 autoreload 20420 8276 Watching for file changes with StatReloader
INFO 2025-07-10 16:47:22,330 basehttp 20420 3572 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1950
INFO 2025-07-10 16:47:22,360 basehttp 20420 17668 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6217
INFO 2025-07-10 16:47:24,908 basehttp 20420 17668 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 16:47:38,209 ml_service 20420 17668 Iniciando análisis de contrato...
INFO 2025-07-10 16:47:38,209 ml_service 20420 17668 Iniciando extracción de cláusulas con GPT
INFO 2025-07-10 16:47:45,461 ml_service 20420 17668 Cláusulas extraídas exitosamente con GPT: 3 cláusulas.
INFO 2025-07-10 16:47:45,476 ml_service 20420 17668 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:47:45,478 ml_service 20420 17668 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:47:46,324 ml_service 20420 17668 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 16:47:46,380 ml_service 20420 17668 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:47:46,380 ml_service 20420 17668 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:47:47,091 ml_service 20420 17668 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-10 16:47:47,135 ml_service 20420 17668 Iniciando validación GPT para cláusula
DEBUG 2025-07-10 16:47:47,135 ml_service 20420 17668 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-10 16:47:47,874 ml_service 20420 17668 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Otro'}
INFO 2025-07-10 16:47:47,876 ml_service 20420 17668 Análisis completado en 9.67 segundos.
INFO 2025-07-10 16:47:47,912 basehttp 20420 17668 "POST /api/contracts/ HTTP/1.1" 201 2230
INFO 2025-07-10 16:47:48,278 basehttp 20420 14016 "OPTIONS /api/clauses/?contract=e62b0386-ee75-4864-a75c-3cec33346432 HTTP/1.1" 200 0
INFO 2025-07-10 16:47:48,278 basehttp 20420 9288 "OPTIONS /api/contracts/e62b0386-ee75-4864-a75c-3cec33346432/ HTTP/1.1" 200 0
INFO 2025-07-10 16:47:49,428 basehttp 20420 17668 "GET /api/contracts/e62b0386-ee75-4864-a75c-3cec33346432/ HTTP/1.1" 200 6262
INFO 2025-07-10 16:47:49,446 basehttp 20420 3572 "GET /api/clauses/?contract=e62b0386-ee75-4864-a75c-3cec33346432 HTTP/1.1" 200 23177
INFO 2025-07-10 19:24:24,301 autoreload 7016 21440 Watching for file changes with StatReloader
INFO 2025-07-10 19:29:34,014 basehttp 7016 19908 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 19:29:47,357 basehttp 7016 5468 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 19:37:20,157 basehttp 7016 24096 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 20:22:36,076 basehttp 7016 6784 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 20:41:13,141 basehttp 7016 16744 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 21:43:34,977 basehttp 7016 14532 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 21:53:18,379 basehttp 7016 18620 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 22:27:11,070 basehttp 7016 22040 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-10 22:38:46,291 basehttp 7016 11344 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-11 15:12:25,722 autoreload 4152 7232 Watching for file changes with StatReloader
INFO 2025-07-11 15:13:43,251 basehttp 4152 5800 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-11 15:13:43,262 basehttp 4152 8276 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-11 15:13:46,375 basehttp 4152 14296 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1940
INFO 2025-07-11 15:13:46,522 basehttp 4152 15508 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6582
INFO 2025-07-11 15:47:30,427 basehttp 4152 18924 "OPTIONS /api/contract-types/ HTTP/1.1" 200 0
INFO 2025-07-11 15:47:32,363 basehttp 4152 16820 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-11 15:47:47,723 basehttp 4152 18924 "OPTIONS /api/contracts/ HTTP/1.1" 200 0
INFO 2025-07-11 15:47:49,168 ml_service 4152 16820 Iniciando análisis de contrato...
INFO 2025-07-11 15:47:49,169 ml_service 4152 16820 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 15:47:57,352 ml_service 4152 16820 Cláusulas extraídas exitosamente con GPT: 13 cláusulas.
INFO 2025-07-11 15:47:57,362 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:47:57,363 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:47:59,335 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:47:59,434 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:47:59,434 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:00,932 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 15:48:00,949 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:00,949 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:02,279 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:48:02,302 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:02,302 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:05,013 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:48:05,028 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:05,029 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:06,496 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 15:48:06,521 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:06,522 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:07,846 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 15:48:07,867 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:07,869 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:08,675 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 15:48:08,694 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:08,694 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:10,236 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 15:48:10,262 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:10,263 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:11,267 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:48:11,297 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:11,298 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:12,575 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:48:12,586 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:12,586 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:13,926 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Pago'}
INFO 2025-07-11 15:48:13,943 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:13,943 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:14,944 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Terminación'}
INFO 2025-07-11 15:48:14,957 ml_service 4152 16820 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:48:14,957 ml_service 4152 16820 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:48:15,975 ml_service 4152 16820 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 15:48:15,986 ml_service 4152 16820 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-11 15:48:15,986 ml_service 4152 16820 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 15:48:17,916 ml_service 4152 16820 Análisis recibido: {'resumen': 'Las cláusulas del contrato pueden favorecer en exceso a la propietaria, limitando los derechos del inquilino y estableciendo condiciones financieras desfavorables.', 'recomendaciones': ['Solicitar una revisión detallada de las cláusulas por un abogado especializado en arrendamientos para garantizar equidad en los términos.', 'Negociar la eliminación o modificación de cláusulas abusivas que limiten los derechos del inquilino o impongan cargas financieras excesivas.', 'Asegurarse de entender completamente las obligaciones y responsabilidades establecidas en el contrato antes de firmarlo.']}
INFO 2025-07-11 15:48:17,917 ml_service 4152 16820 Análisis completado en 28.75 segundos.
INFO 2025-07-11 15:48:18,007 basehttp 4152 16820 "POST /api/contracts/ HTTP/1.1" 201 3905
INFO 2025-07-11 15:48:18,387 basehttp 4152 19188 "OPTIONS /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 200 0
INFO 2025-07-11 15:48:18,390 basehttp 4152 19372 "OPTIONS /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 0
INFO 2025-07-11 15:48:20,390 basehttp 4152 7864 "GET /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 200 13510
INFO 2025-07-11 15:48:20,411 basehttp 4152 18048 "GET /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 18683
INFO 2025-07-11 15:50:27,320 ml_service 4152 18048 Iniciando análisis de contrato...
INFO 2025-07-11 15:50:27,320 ml_service 4152 18048 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 15:50:40,062 ml_service 4152 18048 Cláusulas extraídas exitosamente con GPT: 15 cláusulas.
INFO 2025-07-11 15:50:40,066 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:40,066 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:44,794 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita el derecho del inquilino a recibir un recibo o constancia escrita de los pagos realizados, lo cual puede generar problemas en caso de disputas.', 'abusive_reason': 'La cláusula es abusiva porque limita el derecho fundamental del inquilino a recibir una constancia escrita de los pagos realizados, lo cual puede dificultar la comprobación de cumplimiento de sus obligaciones. Esto crea un desequilibrio significativo entre las partes, ya que el inquilino queda en una posición de vulnerabilidad al no contar con un respaldo documental de sus pagos. Además, esta condición desproporcionada viola los principios de buena fe y equidad, ya que impide al inquilino tener una evidencia clara de sus transacciones.', 'clause_type': 'Pago'}
INFO 2025-07-11 15:50:44,821 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:44,821 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:46,920 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que limita el derecho a la privacidad de la inquilina de manera desproporcionada.', 'abusive_reason': 'La cláusula vulnera el principio de la buena fe y equidad, así como el derecho a la privacidad de la inquilina. En República Dominicana, se protege el derecho a la privacidad de las personas, y esta cláusula crea un desequilibrio significativo entre las partes al permitir al propietario ingresar a la propiedad sin previo aviso ni consentimiento. Esto podría ser considerado abusivo y contrario a la ley.', 'clause_type': 'Otro'}
INFO 2025-07-11 15:50:46,936 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:46,937 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:48,040 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:50:48,066 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:48,068 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:48,851 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:50:48,864 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:48,866 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:50,911 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva porque limita los derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque permite al propietario desalojar a la inquilina inmediatamente y sin necesidad de proceso legal en caso de retraso en el pago, lo cual limita los derechos fundamentales de la inquilina a un debido proceso y a la defensa. Además, crea un desequilibrio significativo entre las partes al otorgar al propietario un poder excesivo sobre la inquilina. Esta cláusula vulnera los principios de buena fe, equidad y proporcionalidad en República Dominicana.', 'clause_type': 'Pago'}
INFO 2025-07-11 15:50:50,932 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:50,933 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:53,560 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita los derechos del contratante al permitir al propietario finalizar el contrato sin previo aviso ni justificación, creando un desequilibrio significativo.', 'abusive_reason': 'La cláusula es abusiva porque otorga al propietario un poder unilateral para finalizar el contrato sin justificación, lo cual limita los derechos fundamentales del contratante y crea un desequilibrio significativo entre las partes. Esto vulnera el principio de buena fe y equidad en los contratos, así como el principio de autonomía de la voluntad de las partes. En la República Dominicana, la Ley No. 358-05 sobre Protección al Consumidor establece que las cláusulas abusivas son nulas y no vinculantes para el consumidor, lo cual podría aplicarse en este caso.', 'clause_type': 'Terminación'}
INFO 2025-07-11 15:50:53,571 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:53,572 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:56,711 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque impone un aumento automático del 50% en el alquiler sin posibilidad de negociación, creando un desequilibrio significativo a favor del arrendador.', 'abusive_reason': 'La cláusula es abusiva porque impone una condición desproporcionada que limita los derechos de la inquilina a negociar el aumento del alquiler, vulnerando el principio de buena fe y equidad. En República Dominicana, esta cláusula podría ser considerada abusiva según el Código Civil y la Ley de Arrendamientos Urbanos y Suburbanos.', 'clause_type': 'Otro'}
INFO 2025-07-11 15:50:56,729 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:56,730 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:57,708 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Pago'}
INFO 2025-07-11 15:50:57,727 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:57,728 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:50:58,630 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:50:58,648 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:50:58,649 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:02,075 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita los derechos del arrendatario al permitir al propietario solicitar la entrega del inmueble en cualquier momento sin justificación y con un aviso verbal de solo 12 horas.', 'abusive_reason': 'Esta cláusula es abusiva porque crea un desequilibrio significativo entre las partes al otorgar al propietario un poder unilateral excesivo que limita los derechos fundamentales del arrendatario. Además, impone condiciones desproporcionadas al no requerir justificación para la solicitud de entrega del inmueble y al establecer un plazo de aviso tan corto. Esta cláusula viola los principios de buena fe y equidad, así como el derecho a la seguridad jurídica y a la protección del consumidor en República Dominicana.', 'clause_type': 'Terminación'}
INFO 2025-07-11 15:51:02,090 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:51:02,090 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:03,100 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Pago'}
INFO 2025-07-11 15:51:03,121 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:51:03,122 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:05,251 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva porque crea un desequilibrio significativo entre las partes al permitir al PROPIETARIO modificar unilateralmente el contrato sin previo aviso ni acuerdo con LA INQUILINA.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de buena fe y equidad, creando un desequilibrio significativo entre las partes al otorgar al PROPIETARIO un poder unilateral para modificar el contrato sin consentimiento de LA INQUILINA. Esto limita los derechos fundamentales de esta última y le impone condiciones desproporcionadas, violando así la protección al consumidor y los principios de equidad y buena fe consagrados en la legislación dominicana.', 'clause_type': 'Otro'}
INFO 2025-07-11 15:51:05,272 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:51:05,272 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:08,735 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita los derechos de la inquilina y crea un desequilibrio significativo a favor del propietario.', 'abusive_reason': 'La cláusula es abusiva porque restringe el acceso de la inquilina a la justicia al renunciar a cualquier acción legal contra el propietario y al imponer que cualquier disputa se resuelva exclusivamente según la voluntad del propietario. Esto viola el principio de igualdad de las partes y el acceso a la justicia, así como el principio de buena fe y equidad. En República Dominicana, este tipo de cláusulas serían consideradas abusivas y nulas por vulnerar los derechos fundamentales de la inquilina.', 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 15:51:08,749 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:51:08,750 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:10,763 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque al obligar a la inquilina a gestionar y pagar servicios básicos como agua potable, electricidad o gas sin garantía de acceso por parte del propietario, limita derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes. Esto vulnera los principios de buena fe y equidad, así como el derecho a condiciones de vida dignas y el principio de igualdad de trato entre arrendador y arrendatario en República Dominicana.', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 15:51:10,782 ml_service 4152 18048 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 15:51:10,782 ml_service 4152 18048 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 15:51:11,890 ml_service 4152 18048 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 15:51:11,902 ml_service 4152 18048 Iniciando análisis OpenAI para 15 cláusulas
DEBUG 2025-07-11 15:51:11,902 ml_service 4152 18048 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 15:51:14,143 ml_service 4152 18048 Análisis recibido: {'resumen': 'Las cláusulas identificadas en el contrato son altamente abusivas y desequilibradas, otorgando al propietario poderes excesivos sobre la inquilina y generando un riesgo significativo de vulneración de derechos.', 'recomendaciones': ['Negociar la eliminación o modificación de las cláusulas abusivas para restablecer un equilibrio en los derechos y obligaciones de las partes.', 'Consultar con un abogado especializado en arrendamientos para asesoramiento legal sobre la validez y legalidad de las cláusulas del contrato.', 'Considerar la posibilidad de buscar un inmueble con un contrato de arrendamiento más equitativo y respetuoso de los derechos del inquilino.']}
INFO 2025-07-11 15:51:14,144 ml_service 4152 18048 Análisis completado en 46.82 segundos.
INFO 2025-07-11 15:51:14,253 basehttp 4152 18048 "POST /api/contracts/ HTTP/1.1" 201 4151
INFO 2025-07-11 15:51:14,306 basehttp 4152 19372 "OPTIONS /api/contracts/297b1e14-3161-49e2-9a88-c766e072e81b/ HTTP/1.1" 200 0
INFO 2025-07-11 15:51:14,307 basehttp 4152 19188 "OPTIONS /api/clauses/?contract=297b1e14-3161-49e2-9a88-c766e072e81b HTTP/1.1" 200 0
INFO 2025-07-11 15:51:16,182 basehttp 4152 7864 "GET /api/clauses/?contract=297b1e14-3161-49e2-9a88-c766e072e81b HTTP/1.1" 200 18995
INFO 2025-07-11 15:51:16,193 basehttp 4152 18048 "GET /api/contracts/297b1e14-3161-49e2-9a88-c766e072e81b/ HTTP/1.1" 200 20210
INFO 2025-07-11 15:51:17,892 basehttp 4152 18048 "GET /api/clauses/?contract=297b1e14-3161-49e2-9a88-c766e072e81b HTTP/1.1" 200 18995
INFO 2025-07-11 15:56:59,416 basehttp 4152 16896 "DELETE /api/contracts/297b1e14-3161-49e2-9a88-c766e072e81b/ HTTP/1.1" 204 0
INFO 2025-07-11 15:56:59,772 basehttp 4152 19408 "OPTIONS /api/contracts/dashboard_stats/ HTTP/1.1" 200 0
INFO 2025-07-11 15:56:59,778 basehttp 4152 13104 "OPTIONS /api/contracts/?page_size=5 HTTP/1.1" 200 0
INFO 2025-07-11 15:57:01,774 basehttp 4152 18260 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1931
INFO 2025-07-11 15:57:01,892 basehttp 4152 16896 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6953
INFO 2025-07-11 16:01:14,258 basehttp 4152 16896 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1931
INFO 2025-07-11 16:01:14,327 basehttp 4152 18260 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6953
INFO 2025-07-11 16:01:18,625 basehttp 4152 18260 "GET /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 200 13510
INFO 2025-07-11 16:01:18,676 basehttp 4152 16896 "GET /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 18683
INFO 2025-07-11 16:10:53,908 basehttp 4152 728 "GET /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 18683
INFO 2025-07-11 16:10:53,945 basehttp 4152 7652 "GET /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 200 13510
INFO 2025-07-11 16:10:55,657 basehttp 4152 7652 "GET /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 18683
INFO 2025-07-11 16:12:03,824 basehttp 4152 728 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6953
INFO 2025-07-11 16:12:03,847 basehttp 4152 7652 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1931
INFO 2025-07-11 16:12:08,502 basehttp 4152 7652 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-11 16:12:28,629 ml_service 4152 7652 Iniciando análisis de contrato...
INFO 2025-07-11 16:12:28,631 ml_service 4152 7652 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 16:12:36,804 ml_service 4152 7652 Cláusulas extraídas exitosamente con GPT: 15 cláusulas.
INFO 2025-07-11 16:12:36,805 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:36,806 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:39,482 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita el derecho del inquilino a recibir un recibo o constancia escrita del pago del alquiler, lo cual puede generar problemas legales y falta de transparencia en la relación contractual.', 'abusive_reason': 'La cláusula es abusiva porque limita el derecho del inquilino a recibir un recibo o constancia escrita del pago del alquiler, lo cual va en contra del principio de transparencia y buena fe en los contratos. Además, al exigir el pago en efectivo únicamente, sin posibilidad de tener un registro escrito, se crea un desequilibrio significativo en la relación contractual, favoreciendo al propietario y dejando al inquilino en una posición vulnerable. En República Dominicana, esta cláusula podría considerarse abusiva por violar el principio de buena fe y equidad en los contratos, así como por limitar derechos fundamentales del inquilino.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:12:39,509 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:39,509 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:42,645 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que limita los derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula vulnera el principio de la inviolabilidad del domicilio, un derecho fundamental reconocido en la Constitución de la República Dominicana. Además, al permitir al propietario ingresar sin aviso ni consentimiento, impone una condición desproporcionada que afecta la equidad entre las partes.', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:12:42,664 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:42,664 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:44,480 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:12:44,501 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:44,501 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:45,693 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:12:45,716 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:45,716 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:48,275 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita los derechos fundamentales de la inquilina al permitir su desalojo inmediato sin proceso legal en caso de retraso en el pago.', 'abusive_reason': 'La cláusula es abusiva porque crea un desequilibrio significativo entre las partes al permitir al propietario desalojar a la inquilina sin necesidad de proceso legal en caso de retraso en el pago. Esto limita los derechos fundamentales de la inquilina a un debido proceso y contradice los principios de buena fe y equidad en las relaciones contractuales. En la República Dominicana, esta cláusula podría ser considerada abusiva por vulnerar el principio de equidad y los derechos fundamentales de la inquilina.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:12:48,298 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:48,298 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:50,932 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque otorga al PROPIETARIO un poder unilateral para finalizar el contrato sin previo aviso ni justificación, creando un desequilibrio significativo a favor del PROPIETARIO.', 'abusive_reason': 'La cláusula es abusiva porque otorga al PROPIETARIO un poder unilateral para finalizar el contrato sin previo aviso ni justificación, lo cual crea un desequilibrio significativo entre las partes. Esta cláusula vulnera el principio de buena fe y equidad, así como el derecho a la seguridad jurídica del otro contratante, al imponer condiciones desproporcionadas que limitan sus derechos fundamentales. En República Dominicana, esta cláusula podría considerarse abusiva según el Código Civil y la Ley de Contratos.', 'clause_type': 'Terminación'}
INFO 2025-07-11 16:12:50,952 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:50,954 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:53,001 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque impone una condición desproporcionada y limita el derecho de negociación de la inquilina.', 'abusive_reason': 'La cláusula es abusiva porque crea un desequilibrio significativo entre las partes al imponer un aumento automático del 50% en el alquiler sin posibilidad de negociación por parte de la inquilina. Esto limita el derecho fundamental de negociación y vulnera el principio de buena fe y equidad en los contratos, contraviniendo así el Código Civil y la Ley de Arrendamientos Urbanos en la República Dominicana.', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:12:53,026 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:53,028 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:54,623 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:12:54,645 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:54,646 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:55,852 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:12:55,881 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:55,882 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:58,516 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que limita los derechos del inquilino al permitir al propietario solicitar la entrega del inmueble en cualquier momento sin justificación y con un aviso verbal de 12 horas, creando un desequilibrio significativo entre las partes.', 'abusive_reason': 'Esta cláusula es abusiva porque vulnera el principio de buena fe y equidad en las relaciones contractuales, al permitir al propietario ejercer un poder excesivo sobre el inquilino sin justificación ni plazo razonable. Además, limita los derechos fundamentales del inquilino a la seguridad y estabilidad en su vivienda, imponiendo condiciones desproporcionadas que favorecen únicamente al propietario.', 'clause_type': 'Terminación'}
INFO 2025-07-11 16:12:58,537 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:58,538 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:12:59,810 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:12:59,831 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:12:59,832 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:13:02,306 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que permite al PROPIETARIO modificar unilateralmente el contrato sin consentimiento de la INQUILINA, creando un desequilibrio significativo de derechos.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de buena fe y equidad entre las partes, al permitir al PROPIETARIO modificar unilateralmente el contrato sin previo aviso ni acuerdo con la INQUILINA, creando un desequilibrio significativo entre las partes. Esto limita los derechos fundamentales de la INQUILINA a la seguridad jurídica y a la protección de sus intereses como parte contratante. En República Dominicana, esta cláusula podría ser considerada abusiva según el Código Civil y la Ley de Arrendamientos Inmobiliarios.', 'clause_type': 'Otro'}
INFO 2025-07-11 16:13:02,325 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:13:02,325 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:13:04,553 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita los derechos de la inquilina y crea un desequilibrio significativo a favor del propietario.', 'abusive_reason': 'La cláusula es abusiva porque limita los derechos fundamentales de la inquilina al renunciar a cualquier acción legal contra el propietario y aceptar que cualquier disputa se resolverá exclusivamente según la voluntad del propietario. Esto crea un desequilibrio significativo entre las partes, violando los principios de buena fe y equidad. En República Dominicana, esta cláusula podría ser considerada abusiva por vulnerar el principio de igualdad de las partes en un contrato, así como el principio de protección al consumidor.', 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 16:13:04,569 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:13:04,570 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:13:08,035 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque obliga a la inquilina a renunciar a servicios básicos esenciales como agua potable, electricidad o gas, lo cual limita sus derechos fundamentales y crea un desequilibrio significativo entre las partes. Esta disposición vulnera el principio de buena fe y equidad, así como el derecho a condiciones de vida dignas, contraviniendo la normativa de protección al consumidor y los principios de igualdad y equidad consagrados en la legislación dominicana.', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:13:08,049 ml_service 4152 7652 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:13:08,050 ml_service 4152 7652 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:13:09,364 ml_service 4152 7652 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Pago'}
INFO 2025-07-11 16:13:09,380 ml_service 4152 7652 Iniciando análisis OpenAI para 15 cláusulas
DEBUG 2025-07-11 16:13:09,381 ml_service 4152 7652 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 16:13:11,214 ml_service 4152 7652 Análisis recibido: {'resumen': 'Las cláusulas del contrato presentan un desequilibrio significativo de derechos en favor del propietario, exponiendo a la inquilina a riesgos de desalojo injustificado, responsabilidades excesivas y falta de garantías básicas.', 'recomendaciones': ['Negociar cláusulas más equitativas que respeten los derechos y obligaciones de ambas partes.', 'Consultar a un abogado especializado en arrendamientos para revisar y modificar el contrato antes de firmarlo.', 'Buscar alternativas de vivienda que ofrezcan condiciones más justas y respetuosas de los derechos del inquilino.']}
INFO 2025-07-11 16:13:11,215 ml_service 4152 7652 Análisis completado en 42.59 segundos.
INFO 2025-07-11 16:13:11,339 basehttp 4152 7652 "POST /api/contracts/ HTTP/1.1" 201 4151
INFO 2025-07-11 16:13:11,717 basehttp 4152 13020 "OPTIONS /api/clauses/?contract=e5aa864b-6409-4124-98ac-5465dd780189 HTTP/1.1" 200 0
INFO 2025-07-11 16:13:11,718 basehttp 4152 10032 "OPTIONS /api/contracts/e5aa864b-6409-4124-98ac-5465dd780189/ HTTP/1.1" 200 0
INFO 2025-07-11 16:13:14,065 basehttp 4152 728 "GET /api/contracts/e5aa864b-6409-4124-98ac-5465dd780189/ HTTP/1.1" 200 20353
INFO 2025-07-11 16:13:14,068 basehttp 4152 7652 "GET /api/clauses/?contract=e5aa864b-6409-4124-98ac-5465dd780189 HTTP/1.1" 200 19138
INFO 2025-07-11 16:14:11,220 basehttp 4152 7652 "DELETE /api/contracts/e5aa864b-6409-4124-98ac-5465dd780189/ HTTP/1.1" 204 0
INFO 2025-07-11 16:14:14,109 basehttp 4152 7652 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1931
INFO 2025-07-11 16:14:14,132 basehttp 4152 728 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6953
INFO 2025-07-11 16:14:16,765 basehttp 4152 7652 "GET /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 200 13510
INFO 2025-07-11 16:14:16,799 basehttp 4152 728 "GET /api/clauses/?contract=c4389473-5e6e-4089-89ae-bb63087bb653 HTTP/1.1" 200 18683
INFO 2025-07-11 16:14:18,652 basehttp 4152 17888 "DELETE /api/contracts/c4389473-5e6e-4089-89ae-bb63087bb653/ HTTP/1.1" 204 0
INFO 2025-07-11 16:14:21,462 basehttp 4152 17888 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1940
INFO 2025-07-11 16:14:21,465 basehttp 4152 728 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6582
INFO 2025-07-11 16:16:09,431 ml_service 4152 728 Iniciando análisis de contrato...
INFO 2025-07-11 16:16:09,432 ml_service 4152 728 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 16:16:16,342 ml_service 4152 728 Cláusulas extraídas exitosamente con GPT: 13 cláusulas.
INFO 2025-07-11 16:16:16,346 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:16,346 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:17,000 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:17,076 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:17,077 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:17,882 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 16:16:17,906 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:17,907 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:18,686 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:18,720 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:18,720 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:19,735 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:19,752 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:19,753 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:20,963 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:16:20,989 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:20,991 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:21,988 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 16:16:22,013 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:22,013 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:22,776 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:22,805 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:22,805 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:24,443 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:24,472 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:24,472 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:25,356 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:25,392 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:25,393 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:26,593 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:16:26,616 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:26,617 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:27,826 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Pago'}
INFO 2025-07-11 16:16:27,852 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:27,853 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:28,667 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Terminación'}
INFO 2025-07-11 16:16:28,682 ml_service 4152 728 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:16:28,683 ml_service 4152 728 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:16:29,763 ml_service 4152 728 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 16:16:29,788 ml_service 4152 728 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-11 16:16:29,788 ml_service 4152 728 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 16:16:32,431 ml_service 4152 728 Análisis recibido: {'resumen': 'Las cláusulas del contrato presentan desequilibrio de derechos en favor de la propietaria, imponiendo cargas excesivas al inquilino y limitando su libertad de acción.', 'recomendaciones': ['Negociar cláusulas más equitativas que balanceen los derechos y obligaciones de ambas partes.', 'Revisar la cláusula de penalidad por rescisión anticipada para asegurar que sea razonable y proporcional.', 'Consultar con un abogado especializado en arrendamientos para asesoramiento legal antes de firmar el contrato.']}
INFO 2025-07-11 16:16:32,433 ml_service 4152 728 Análisis completado en 23.00 segundos.
INFO 2025-07-11 16:16:32,563 basehttp 4152 728 "POST /api/contracts/ HTTP/1.1" 201 3918
INFO 2025-07-11 16:16:32,647 basehttp 4152 10032 "OPTIONS /api/contracts/eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed/ HTTP/1.1" 200 0
INFO 2025-07-11 16:16:32,648 basehttp 4152 13020 "OPTIONS /api/clauses/?contract=eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed HTTP/1.1" 200 0
INFO 2025-07-11 16:16:35,394 basehttp 4152 728 "GET /api/contracts/eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed/ HTTP/1.1" 200 13534
INFO 2025-07-11 16:16:35,441 basehttp 4152 17888 "GET /api/clauses/?contract=eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed HTTP/1.1" 200 18694
INFO 2025-07-11 16:17:24,636 basehttp 4152 17888 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1944
INFO 2025-07-11 16:17:24,703 basehttp 4152 728 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6966
INFO 2025-07-11 16:17:34,448 basehttp 4152 13020 "OPTIONS /api/contracts/2813e974-0795-47ac-8858-ab1b63f6b04b/ HTTP/1.1" 200 0
INFO 2025-07-11 16:17:34,448 basehttp 4152 10032 "OPTIONS /api/clauses/?contract=2813e974-0795-47ac-8858-ab1b63f6b04b HTTP/1.1" 200 0
INFO 2025-07-11 16:17:37,002 basehttp 4152 728 "GET /api/contracts/2813e974-0795-47ac-8858-ab1b63f6b04b/ HTTP/1.1" 200 2644
INFO 2025-07-11 16:17:37,044 basehttp 4152 17888 "GET /api/clauses/?contract=2813e974-0795-47ac-8858-ab1b63f6b04b HTTP/1.1" 200 18694
INFO 2025-07-11 16:17:41,201 basehttp 4152 17888 "DELETE /api/contracts/2813e974-0795-47ac-8858-ab1b63f6b04b/ HTTP/1.1" 204 0
INFO 2025-07-11 16:17:44,286 basehttp 4152 17888 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1991
INFO 2025-07-11 16:17:44,321 basehttp 4152 728 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6633
INFO 2025-07-11 16:17:46,028 basehttp 4152 10032 "OPTIONS /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 0
INFO 2025-07-11 16:17:46,030 basehttp 4152 13020 "OPTIONS /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 0
INFO 2025-07-11 16:17:48,783 basehttp 4152 728 "GET /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 18694
INFO 2025-07-11 16:17:48,831 basehttp 4152 17888 "GET /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 200 19646
INFO 2025-07-11 16:17:50,625 basehttp 4152 17888 "GET /api/clauses/?contract=866a9ffd-a36a-4cb1-bf46-e301246765fe HTTP/1.1" 200 18694
INFO 2025-07-11 16:17:53,120 basehttp 4152 17888 "DELETE /api/contracts/866a9ffd-a36a-4cb1-bf46-e301246765fe/ HTTP/1.1" 204 0
INFO 2025-07-11 16:17:56,433 basehttp 4152 18848 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1990
INFO 2025-07-11 16:17:56,485 basehttp 4152 1916 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 6257
INFO 2025-07-11 16:17:58,851 basehttp 4152 1684 "OPTIONS /api/contracts/4ffce7e5-c829-4037-9955-590675170096/ HTTP/1.1" 200 0
INFO 2025-07-11 16:17:58,855 basehttp 4152 3416 "OPTIONS /api/clauses/?contract=4ffce7e5-c829-4037-9955-590675170096 HTTP/1.1" 200 0
INFO 2025-07-11 16:18:01,755 basehttp 4152 18848 "GET /api/clauses/?contract=4ffce7e5-c829-4037-9955-590675170096 HTTP/1.1" 200 15718
INFO 2025-07-11 16:18:01,767 basehttp 4152 1916 "GET /api/contracts/4ffce7e5-c829-4037-9955-590675170096/ HTTP/1.1" 200 1333
INFO 2025-07-11 16:18:03,951 basehttp 4152 1916 "GET /api/clauses/?contract=4ffce7e5-c829-4037-9955-590675170096 HTTP/1.1" 200 15718
INFO 2025-07-11 16:18:05,779 basehttp 4152 18848 "DELETE /api/contracts/4ffce7e5-c829-4037-9955-590675170096/ HTTP/1.1" 204 0
INFO 2025-07-11 16:18:08,614 basehttp 4152 18848 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1990
INFO 2025-07-11 16:18:08,650 basehttp 4152 1916 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5891
INFO 2025-07-11 16:18:29,734 basehttp 4152 1684 "OPTIONS /api/clauses/?contract=1d098808-c734-4754-9bd6-d17046ef2153 HTTP/1.1" 200 0
INFO 2025-07-11 16:18:29,734 basehttp 4152 3416 "OPTIONS /api/contracts/1d098808-c734-4754-9bd6-d17046ef2153/ HTTP/1.1" 200 0
INFO 2025-07-11 16:18:33,010 basehttp 4152 1916 "GET /api/contracts/1d098808-c734-4754-9bd6-d17046ef2153/ HTTP/1.1" 200 1333
INFO 2025-07-11 16:18:33,094 basehttp 4152 18848 "GET /api/clauses/?contract=1d098808-c734-4754-9bd6-d17046ef2153 HTTP/1.1" 200 15718
INFO 2025-07-11 16:18:37,098 basehttp 4152 18848 "DELETE /api/contracts/1d098808-c734-4754-9bd6-d17046ef2153/ HTTP/1.1" 204 0
INFO 2025-07-11 16:18:40,393 basehttp 4152 18848 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1990
INFO 2025-07-11 16:18:40,410 basehttp 4152 1916 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5525
INFO 2025-07-11 16:18:44,167 basehttp 4152 18848 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5525
INFO 2025-07-11 16:18:44,180 basehttp 4152 1916 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1990
INFO 2025-07-11 16:18:55,005 basehttp 4152 18848 "GET /api/clauses/?contract=eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed HTTP/1.1" 200 15718
INFO 2025-07-11 16:18:55,044 basehttp 4152 1916 "GET /api/contracts/eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed/ HTTP/1.1" 200 13534
INFO 2025-07-11 16:18:56,863 basehttp 4152 1916 "GET /api/clauses/?contract=eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed HTTP/1.1" 200 15718
INFO 2025-07-11 16:18:59,159 basehttp 4152 1916 "DELETE /api/contracts/eb8427d5-2b9c-4f2e-8a6d-384c6583e2ed/ HTTP/1.1" 204 0
INFO 2025-07-11 16:19:02,024 basehttp 4152 1916 "GET /api/contracts/dashboard_stats/ HTTP/1.1" 200 1958
INFO 2025-07-11 16:19:02,029 basehttp 4152 18848 "GET /api/contracts/?page_size=5 HTTP/1.1" 200 5141
INFO 2025-07-11 16:19:23,794 basehttp 4152 18848 "GET /api/contract-types/ HTTP/1.1" 200 1236
INFO 2025-07-11 16:19:43,493 ml_service 4152 18848 Iniciando análisis de contrato...
INFO 2025-07-11 16:19:43,493 ml_service 4152 18848 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 16:19:51,801 ml_service 4152 18848 Cláusulas extraídas exitosamente con GPT: 13 cláusulas.
INFO 2025-07-11 16:19:51,803 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:51,805 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:52,730 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:19:52,764 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:52,765 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:53,843 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 16:19:53,880 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:53,883 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:55,185 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:19:55,396 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:55,420 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:56,402 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:19:56,422 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:56,422 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:57,136 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:19:57,170 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:57,171 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:19:58,354 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Duración'}
INFO 2025-07-11 16:19:58,370 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:19:58,371 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:03,621 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:20:03,641 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:03,641 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:04,798 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:20:04,823 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:04,823 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:05,625 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:20:05,658 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:05,659 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:06,856 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:20:06,878 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:06,879 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:07,876 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:20:07,902 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:07,904 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:09,106 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Terminación'}
INFO 2025-07-11 16:20:09,130 ml_service 4152 18848 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:20:09,130 ml_service 4152 18848 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:20:10,531 ml_service 4152 18848 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 16:20:10,546 ml_service 4152 18848 Iniciando análisis OpenAI para 9 cláusulas
DEBUG 2025-07-11 16:20:10,547 ml_service 4152 18848 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 16:20:14,533 ml_service 4152 18848 Análisis recibido: {'resumen': 'Las cláusulas del contrato presentan riesgos para el inquilino al limitar su libertad de subarrendar, imponer responsabilidades excesivas de mantenimiento y establecer penalidades severas por incumplimiento o rescisión anticipada.', 'recomendaciones': ['Solicitar modificar la cláusula de penalidad por rescisión anticipada para que sea proporcional y justa.', 'Negociar la posibilidad de subarrendar el inmueble con consentimiento previo y razonable de la propietaria.', 'Revisar detenidamente las responsabilidades de mantenimiento para asegurar que sean equitativas y claras para ambas partes.']}
INFO 2025-07-11 16:20:14,535 ml_service 4152 18848 Análisis completado en 31.04 segundos.
INFO 2025-07-11 16:20:14,653 basehttp 4152 18848 "POST /api/contracts/ HTTP/1.1" 201 3918
INFO 2025-07-11 16:20:14,702 basehttp 4152 1684 "OPTIONS /api/contracts/c7042283-37cf-41d9-940b-e0c18439f00c/ HTTP/1.1" 200 0
INFO 2025-07-11 16:20:14,712 basehttp 4152 3416 "OPTIONS /api/clauses/?contract=c7042283-37cf-41d9-940b-e0c18439f00c HTTP/1.1" 200 0
INFO 2025-07-11 16:20:17,856 basehttp 4152 18848 "GET /api/contracts/c7042283-37cf-41d9-940b-e0c18439f00c/ HTTP/1.1" 200 13526
INFO 2025-07-11 16:20:17,893 basehttp 4152 1916 "GET /api/clauses/?contract=c7042283-37cf-41d9-940b-e0c18439f00c HTTP/1.1" 200 15710
INFO 2025-07-11 16:21:04,577 ml_service 4152 1916 Iniciando análisis de contrato...
INFO 2025-07-11 16:21:04,578 ml_service 4152 1916 Iniciando extracción de cláusulas con GPT
INFO 2025-07-11 16:21:36,631 ml_service 4152 1916 Cláusulas extraídas exitosamente con GPT: 15 cláusulas.
INFO 2025-07-11 16:21:36,634 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:36,634 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:38,853 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita el derecho del inquilino a recibir un recibo o constancia escrita de los pagos realizados, lo cual puede generar problemas de falta de evidencia en caso de disputas.', 'abusive_reason': 'La cláusula es abusiva porque limita el derecho fundamental del inquilino a recibir un recibo o constancia escrita de los pagos realizados, lo cual puede generar desequilibrio entre las partes al no contar con evidencia de los pagos realizados. Esta limitación vulnera el principio de buena fe y equidad, así como el derecho a la seguridad jurídica del inquilino. En República Dominicana, la Ley No. 288-04 sobre Arrendamientos Inmobiliarios prohíbe cláusulas abusivas que limiten derechos fundamentales de las partes en un contrato de arrendamiento.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:21:38,872 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:38,873 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:40,620 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que limita los derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de la buena fe y equidad, al permitir al propietario ingresar a la propiedad sin previo aviso ni consentimiento de la inquilina, lo cual limita los derechos fundamentales de esta última. Además, crea un desequilibrio significativo entre las partes al otorgar al propietario un poder excesivo sobre la propiedad arrendada.', 'clause_type': 'Otro'}
INFO 2025-07-11 16:21:40,634 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:40,634 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:41,470 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': '', 'abusive_reason': '', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:21:41,489 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:41,491 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:42,411 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:21:42,422 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:42,423 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:44,622 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita los derechos fundamentales de la inquilina y crea un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque permite al propietario desalojar a la inquilina inmediatamente y sin necesidad de proceso legal en caso de retraso en el pago. Esto limita los derechos fundamentales de la inquilina a un debido proceso y a la seguridad de la tenencia. Además, crea un desequilibrio significativo entre las partes, ya que otorga al propietario un poder excesivo sobre la inquilina. Esta cláusula viola los principios de buena fe y equidad, así como el derecho a la vivienda digna consagrado en la Constitución de la República Dominicana.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:21:44,643 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:44,644 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:46,509 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque limita los derechos del contratante al permitir al PROPIETARIO finalizar el contrato sin previo aviso ni justificación, creando un desequilibrio significativo entre las partes.', 'abusive_reason': 'La cláusula es abusiva porque otorga al PROPIETARIO un poder unilateral para finalizar el contrato sin justificación, lo cual limita los derechos del contratante de manera desproporcionada y viola el principio de buena fe y equidad. En República Dominicana, esta cláusula podría ser considerada abusiva por vulnerar el principio de equilibrio contractual y la buena fe, protegidos por el Código Civil y la Ley de Contratos de la República Dominicana.', 'clause_type': 'Terminación'}
INFO 2025-07-11 16:21:46,516 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:46,516 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:50,129 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque impone un aumento automático del alquiler sin posibilidad de negociación, creando un desequilibrio significativo a favor del arrendador.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de buena fe y equidad entre las partes, al imponer un aumento automático del alquiler sin posibilidad de negociación por parte del inquilino. Esto crea un desequilibrio significativo en los derechos y obligaciones de las partes, limitando la capacidad de la inquilina para negociar condiciones justas. En República Dominicana, esta cláusula podría ser considerada abusiva según el Código Civil y la Ley de Arrendamientos Urbanos y Suburbanos.', 'clause_type': 'Duración'}
INFO 2025-07-11 16:21:50,138 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:50,139 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:51,272 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Pago'}
INFO 2025-07-11 16:21:51,282 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:51,282 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:52,160 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': False, 'explanation': None, 'abusive_reason': None, 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:21:52,179 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:52,179 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:56,322 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva porque limita los derechos del inquilino al permitir al propietario solicitar la entrega del inmueble en cualquier momento sin justificación y con un aviso verbal de solo 12 horas.', 'abusive_reason': 'La cláusula es abusiva porque crea un desequilibrio significativo entre las partes al otorgar al propietario un poder excesivo sobre el inquilino, limitando sus derechos fundamentales a la seguridad y estabilidad en el uso del inmueble. Además, impone condiciones desproporcionadas al no requerir justificación para la solicitud de entrega y al establecer un aviso verbal de corta duración. Esta cláusula vulnera los principios de buena fe y equidad, así como el derecho a la vivienda digna reconocido en la Constitución de la República Dominicana.', 'clause_type': 'Terminación'}
INFO 2025-07-11 16:21:56,330 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:56,330 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:21:59,206 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque impone una penalidad desproporcionada a la inquilina en caso de rescisión anticipada del contrato.', 'abusive_reason': 'La cláusula es abusiva porque impone una penalidad excesiva a la inquilina en caso de rescisión anticipada del contrato, lo cual crea un desequilibrio significativo entre las partes. Esta penalidad desproporcionada podría considerarse una limitación de derechos fundamentales, ya que dificulta el ejercicio del derecho a rescindir el contrato. Además, vulnera el principio de buena fe y equidad al imponer una carga excesiva a una de las partes.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:21:59,223 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:21:59,223 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:22:01,280 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que crea un desequilibrio significativo entre las partes al permitir al PROPIETARIO modificar unilateralmente el contrato sin consentimiento de LA INQUILINA.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de buena fe y equidad entre las partes, al permitir al PROPIETARIO modificar unilateralmente el contrato sin previo aviso ni acuerdo con LA INQUILINA, creando un desequilibrio significativo de derechos. En República Dominicana, esto contraviene el principio de igualdad de las partes en los contratos, así como el deber de respetar los derechos fundamentales de los contratantes.', 'clause_type': 'Otro'}
INFO 2025-07-11 16:22:01,291 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:22:01,292 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:22:04,042 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva porque crea un desequilibrio significativo entre las partes y limita los derechos fundamentales de la inquilina.', 'abusive_reason': 'La cláusula es abusiva porque vulnera el principio de igualdad de las partes, al darle todo el poder de decisión al propietario y limitar la capacidad de la inquilina para ejercer acciones legales. Además, restringe el acceso a la justicia y la posibilidad de resolver disputas de manera equitativa. En República Dominicana, esta cláusula podría considerarse abusiva por violar el principio de igualdad de las partes en los contratos, así como el derecho de acceso a la justicia y a un proceso justo.', 'clause_type': 'Resolución de Disputas'}
INFO 2025-07-11 16:22:04,057 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:22:04,058 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:22:05,890 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'La cláusula es abusiva ya que limita derechos fundamentales de la inquilina.', 'abusive_reason': 'La cláusula es abusiva porque obliga a la inquilina a renunciar a servicios básicos esenciales como agua potable, electricidad o gas, lo cual limita sus derechos fundamentales y crea un desequilibrio significativo entre las partes. Esta cláusula vulnera el principio de buena fe y equidad, así como el derecho a condiciones de vida dignas, contraviniendo la Ley No. 481-08 sobre Protección de los Derechos del Consumidor en la República Dominicana.', 'clause_type': 'Obligaciones'}
INFO 2025-07-11 16:22:05,902 ml_service 4152 1916 Iniciando validación GPT para cláusula
DEBUG 2025-07-11 16:22:05,903 ml_service 4152 1916 Enviando solicitud a OpenAI API con prompt: 
            Analiza el siguiente texto de un contrato legal y responde en formato JSON con las sigu...
DEBUG 2025-07-11 16:22:10,509 ml_service 4152 1916 Resultado del análisis GPT: {'is_valid_clause': True, 'is_abusive': True, 'explanation': 'Esta cláusula es abusiva ya que impone una carga desproporcionada a los familiares en caso de fallecimiento de la inquilina.', 'abusive_reason': 'La cláusula es abusiva porque crea un desequilibrio significativo entre las partes al imponer una obligación desproporcionada a los familiares de la inquilina en caso de fallecimiento. Además, limita los derechos fundamentales de los familiares al obligarlos a continuar pagando el alquiler sin considerar su situación económica o interés en el contrato. Esta cláusula vulnera los principios de buena fe y equidad, así como el principio de protección al consumidor establecido en la Ley 358-05 de Protección al Consumidor en República Dominicana.', 'clause_type': 'Pago'}
INFO 2025-07-11 16:22:10,520 ml_service 4152 1916 Iniciando análisis OpenAI para 15 cláusulas
DEBUG 2025-07-11 16:22:10,520 ml_service 4152 1916 Enviando solicitud a OpenAI API para análisis general
DEBUG 2025-07-11 16:22:12,280 ml_service 4152 1916 Análisis recibido: {'resumen': 'Las cláusulas del contrato son altamente abusivas y desequilibradas, otorgando poder ilimitado al propietario y dejando a la inquilina en una posición vulnerable.', 'recomendaciones': ['Negociar la eliminación o modificación de cláusulas abusivas antes de firmar el contrato.', 'Consultar con un abogado especializado en arrendamientos para proteger los derechos de la inquilina.', 'Buscar un contrato de arrendamiento más equitativo que cumpla con la legislación vigente en República Dominicana.']}
INFO 2025-07-11 16:22:12,282 ml_service 4152 1916 Análisis completado en 67.70 segundos.
INFO 2025-07-11 16:22:12,351 basehttp 4152 1916 "POST /api/contracts/ HTTP/1.1" 201 4163
INFO 2025-07-11 16:22:12,386 basehttp 4152 3416 "OPTIONS /api/contracts/d450ca85-47ae-4446-a100-a71e2c89e54e/ HTTP/1.1" 200 0
INFO 2025-07-11 16:22:12,388 basehttp 4152 1684 "OPTIONS /api/clauses/?contract=d450ca85-47ae-4446-a100-a71e2c89e54e HTTP/1.1" 200 0
INFO 2025-07-11 16:22:14,244 basehttp 4152 18848 "GET /api/clauses/?contract=d450ca85-47ae-4446-a100-a71e2c89e54e HTTP/1.1" 200 20218
INFO 2025-07-11 16:22:14,280 basehttp 4152 1916 "GET /api/contracts/d450ca85-47ae-4446-a100-a71e2c89e54e/ HTTP/1.1" 200 21445
INFO 2025-07-11 16:22:15,846 basehttp 4152 1916 "GET /api/clauses/?contract=d450ca85-47ae-4446-a100-a71e2c89e54e HTTP/1.1" 200 20218
